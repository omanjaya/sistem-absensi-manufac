import{d as k,N as _,X as V,r as P,c as y,O as U,o as E,C as j,e as f,E as g,s as o,v as c,y as M,q as h,Q as t,V as d,W as q,R as D,H as N,l as C,t as T}from"./vendor-5hdk-FM1.js";import{a as B,e as p}from"./index-CpcTDv9q.js";const I={class:"container mx-auto px-4 py-6"},R={class:"bg-white rounded-lg shadow"},S={class:"px-6 py-4 border-b border-gray-200"},A={class:"text-xl font-semibold text-gray-900"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"space-y-4"},F={class:"space-y-4"},H={class:"flex items-center"},K={key:0,class:"mt-6 border-t pt-6"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q=["required"],W=["required"],X={class:"mt-8 flex justify-end space-x-3"},z=["disabled"],$=k({__name:"EmployeeForm",setup(J){const b=_(),v=V(),u=B(),i=P(!1),m=y(()=>v.params.id),r=y(()=>!!m.value),s=U({name:"",email:"",employee_id:"",phone:"",role:"employee",position:"",department:"",join_date:"",basic_salary:null,is_active:!0,password:"",password_confirmation:""}),w=async()=>{var n,e;if(r.value)try{i.value=!0;const l=await p.getEmployee(parseInt(m.value));Object.assign(s,{name:l.name,email:l.email,employee_id:l.employee_id,phone:l.phone||"",role:l.role,position:l.position||"",department:l.department||"",join_date:l.join_date||"",basic_salary:l.basic_salary||null,is_active:l.is_active||!0})}catch(l){u.error(((e=(n=l.response)==null?void 0:n.data)==null?void 0:e.message)||"Gagal memuat data pegawai"),b.push("/employees")}finally{i.value=!1}},x=async()=>{var n,e;if(!r.value&&s.password!==s.password_confirmation){u.error("Password dan konfirmasi password tidak cocok");return}try{i.value=!0;const l={name:s.name,email:s.email,employee_id:s.employee_id,phone:s.phone,role:s.role,position:s.position,department:s.department,join_date:s.join_date,basic_salary:s.basic_salary,is_active:s.is_active,...!r.value&&{password:s.password,password_confirmation:s.password_confirmation}};r.value?(await p.updateEmployee(parseInt(m.value),l),u.success("Data pegawai berhasil diperbarui")):(await p.createEmployee(l),u.success("Pegawai baru berhasil ditambahkan")),b.push("/employees")}catch(l){u.error(((e=(n=l.response)==null?void 0:n.data)==null?void 0:e.message)||"Gagal menyimpan data pegawai")}finally{i.value=!1}};return E(()=>{r.value&&w()}),(n,e)=>{const l=j("router-link");return g(),f("div",I,[o("div",R,[o("div",S,[o("h1",A,c(r.value?"Edit Pegawai":"Tambah Pegawai"),1)]),o("form",{onSubmit:M(x,["prevent"]),class:"p-6"},[o("div",G,[o("div",O,[e[16]||(e[16]=o("h3",{class:"text-lg font-medium text-gray-900"},"Informasi Dasar",-1)),o("div",null,[e[12]||(e[12]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Lengkap *",-1)),t(o("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.name=a),type:"text",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Masukkan nama lengkap"},null,512),[[d,s.name]])]),o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email *",-1)),t(o("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.email=a),type:"email",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"contoh@email.com"},null,512),[[d,s.email]])]),o("div",null,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID Pegawai *",-1)),t(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.employee_id=a),type:"text",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"EMP001"},null,512),[[d,s.employee_id]])]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"No. Telepon",-1)),t(o("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.phone=a),type:"tel",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"08123456789"},null,512),[[d,s.phone]])])]),o("div",F,[e[24]||(e[24]=o("h3",{class:"text-lg font-medium text-gray-900"},"Detail Pekerjaan",-1)),o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role *",-1)),t(o("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.role=a),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},e[17]||(e[17]=[o("option",{value:""},"Pilih Role",-1),o("option",{value:"admin"},"Admin",-1),o("option",{value:"employee"},"Pegawai",-1)]),512),[[q,s.role]])]),o("div",null,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Posisi",-1)),t(o("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.position=a),type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Masukkan posisi"},null,512),[[d,s.position]])]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Departemen",-1)),t(o("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.department=a),type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Masukkan departemen"},null,512),[[d,s.department]])]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Bergabung",-1)),t(o("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.join_date=a),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[d,s.join_date]])]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gaji Pokok",-1)),t(o("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.basic_salary=a),type:"number",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"5000000"},null,512),[[d,s.basic_salary]])]),o("div",H,[t(o("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.is_active=a),type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[D,s.is_active]]),e[23]||(e[23]=o("label",{class:"ml-2 text-sm text-gray-700"},"Status Aktif",-1))])])]),r.value?h("",!0):(g(),f("div",K,[e[27]||(e[27]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Password",-1)),o("div",L,[o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password *",-1)),t(o("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>s.password=a),type:"password",required:!r.value,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Minimal 8 karakter"},null,8,Q),[[d,s.password]])]),o("div",null,[e[26]||(e[26]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Konfirmasi Password *",-1)),t(o("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>s.password_confirmation=a),type:"password",required:!r.value,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Ulangi password"},null,8,W),[[d,s.password_confirmation]])])])])),o("div",X,[N(l,{to:"/employees",class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors"},{default:C(()=>e[28]||(e[28]=[T(" Batal ")])),_:1,__:[28]}),o("button",{type:"submit",disabled:i.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors"},c(i.value?"Menyimpan...":r.value?"Update":"Simpan"),9,z)])],32)])])}}});export{$ as default};
