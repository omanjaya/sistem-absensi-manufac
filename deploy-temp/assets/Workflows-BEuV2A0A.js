import{e as g,E as f,s as t,d as ce,r as d,c as pe,o as ve,H as s,B as o,l as r,t as u,v as c,F as R,z as P,j as fe,q as me,Q as ye,R as ge}from"./vendor-5hdk-FM1.js";import{_ as p,a as M}from"./Toast.vue_vue_type_style_index_0_scoped_caf7d6d7_lang-C7Vi0Lv3.js";import{_ as S,a as _}from"./MetricCard.vue_vue_type_script_setup_true_lang-MRCzEDgO.js";import{_ as y}from"./Form.vue_vue_type_script_setup_true_lang-Cf_hhWd7.js";import{_ as z}from"./Modal.vue_vue_type_script_setup_true_lang-B2LSZhV7.js";import{_ as we}from"./Table.vue_vue_type_script_setup_true_lang-BoFOdIMn.js";import{a as xe}from"./index-CpcTDv9q.js";import{r as B}from"./ClockIcon-CBPLoeYF.js";import{r as j}from"./CheckCircleIcon-CxojgCya.js";import{r as J}from"./Cog6ToothIcon-DpcSZR3X.js";import{r as be}from"./ChartBarIcon-C6LZcBBN.js";import{r as _e}from"./DocumentArrowDownIcon-Cv5EfLmt.js";function he(F,i){return f(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function ke(F,i){return f(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Ce={class:"p-6 space-y-6"},Se={class:"flex items-center justify-between"},Ve={class:"flex items-center space-x-3"},Ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},We={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e={class:"flex items-center space-x-3"},Re={class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"},Pe={class:"text-xs text-gray-500"},Me={class:"flex items-center space-x-3"},je={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},Fe={class:"flex items-center space-x-3"},Le={class:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center"},qe={class:"flex items-center space-x-3"},Ne={class:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center"},Ue={class:"space-y-3"},De={class:"flex items-center space-x-3"},ze={class:"text-sm font-medium"},Be={class:"text-xs text-gray-500"},Je={class:"text-xs text-gray-400"},Oe={class:"flex items-center space-x-2"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},He={class:"text-center p-4"},Ie={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3"},Qe={class:"text-lg font-semibold text-gray-900"},Ge={class:"text-center p-4"},Ze={class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"},Ke={class:"text-lg font-semibold text-gray-900"},Xe={class:"text-center p-4"},Ye={class:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3"},et={class:"text-lg font-semibold text-gray-900"},tt={class:"text-sm text-gray-900"},lt={class:"text-sm text-gray-500"},at={class:"flex space-x-1"},ot={class:"space-y-6"},st={class:"flex items-center space-x-4"},rt={class:"space-y-3 max-h-96 overflow-y-auto"},it=["id","value"],nt={class:"flex-1"},dt={class:"flex items-center justify-between"},ut=["for"],ct={class:"text-xs text-gray-500 mt-1"},pt={class:"text-xs text-gray-400"},vt={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},ft={class:"text-sm text-gray-600"},mt={class:"flex space-x-2"},yt={class:"flex space-x-2"},gt={class:"space-y-6"},wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bt={class:"space-y-2"},_t={class:"flex space-x-2"},jt=ce({__name:"Workflows",setup(F){const i=xe(),L=d(""),h=d(!1),k=d(!1),V=d(!1),v=d([]),w=d({pendingApprovals:23,pendingChange:5,completedToday:47,completedChange:12,activeWorkflows:8,activeChange:2,efficiencyRate:94,efficiencyChange:3}),A=d({queueSize:156,runningJobs:7,avgProcessTime:"2.3s"}),W=d([{id:1,employee:"John Doe",type:"Annual Leave",days:3},{id:2,employee:"Jane Smith",type:"Sick Leave",days:1},{id:3,employee:"Mike Johnson",type:"Personal Leave",days:2}]),m=d([{id:1,title:"Leave Request - John Doe",description:"Annual leave for 3 days starting Jan 20",priority:"Medium",type:"Leave",created_at:"2024-01-19 09:30:00"},{id:2,title:"Salary Adjustment - Jane Smith",description:"Promotion salary increase request",priority:"High",type:"Salary",created_at:"2024-01-19 08:15:00"},{id:3,title:"Overtime Request - Mike Johnson",description:"Weekend overtime approval needed",priority:"Low",type:"Overtime",created_at:"2024-01-18 16:45:00"}]),C=d([{id:1,name:"Monthly Salary Generation",type:"Salary",status:"completed",duration:45,created_at:"2024-01-19 02:00:00"},{id:2,name:"Leave Approval Notification",type:"Notification",status:"running",duration:0,created_at:"2024-01-19 10:30:00"},{id:3,name:"Attendance Report Export",type:"Report",status:"failed",duration:12,created_at:"2024-01-19 09:15:00"}]),x=d({type:"",priority:""}),n=d({name:"",type:"",description:"",trigger:"",priority:"Medium",steps:[{action:""}]}),T=d({name:""}),O=[{value:"",label:"All Workflows"},{value:"salary",label:"Salary Workflows"},{value:"leave",label:"Leave Workflows"},{value:"notification",label:"Notification Workflows"}],E=[{value:"",label:"All Types"},{value:"Leave",label:"Leave Requests"},{value:"Salary",label:"Salary Changes"},{value:"Overtime",label:"Overtime Requests"}],q=[{value:"",label:"All Priorities"},{value:"High",label:"High Priority"},{value:"Medium",label:"Medium Priority"},{value:"Low",label:"Low Priority"}],H=[{value:"approval",label:"Approval Workflow"},{value:"automation",label:"Automation Workflow"},{value:"notification",label:"Notification Workflow"},{value:"report",label:"Report Generation"}],I=[{value:"manual",label:"Manual Trigger"},{value:"scheduled",label:"Scheduled"},{value:"event",label:"Event-based"},{value:"api",label:"API Trigger"}],Q=[{key:"name",label:"Workflow Name",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"duration",label:"Duration",sortable:!0},{key:"created_at",label:"Started At",sortable:!0},{key:"actions",label:"Actions",sortable:!1}],G=[{key:"type",label:"Type",options:[{value:"Salary",label:"Salary"},{value:"Notification",label:"Notification"},{value:"Report",label:"Report"}]},{key:"status",label:"Status",options:[{value:"completed",label:"Completed"},{value:"running",label:"Running"},{value:"failed",label:"Failed"}]}],Z=pe(()=>{let a=m.value;return x.value.type&&(a=a.filter(e=>e.type===x.value.type)),x.value.priority&&(a=a.filter(e=>e.priority===x.value.priority)),a});function N(a){return{High:"danger",Medium:"warning",Low:"success"}[a]||"gray"}function K(a){return{completed:"success",running:"info",failed:"danger",pending:"warning"}[a]||"gray"}function $(a){return new Date(a).toLocaleString()}async function X(){try{await new Promise(a=>setTimeout(a,1e3)),i.success(`${W.value.length} leave requests approved`),W.value=[]}catch{i.error("Failed to approve leave requests")}}async function Y(){try{await new Promise(a=>setTimeout(a,2e3)),i.success("Salary generation completed successfully")}catch{i.error("Failed to generate salaries")}}async function ee(){try{await new Promise(a=>setTimeout(a,1500)),i.success("Bulk notifications sent successfully")}catch{i.error("Failed to send notifications")}}async function te(){try{await new Promise(a=>setTimeout(a,1e3)),i.success("Reports exported successfully")}catch{i.error("Failed to export reports")}}function le(a){const e=m.value.findIndex(l=>l.id===a);e>-1&&(m.value.splice(e,1),i.success("Item approved successfully"))}async function ae(){try{await new Promise(a=>setTimeout(a,1e3)),m.value=m.value.filter(a=>!v.value.includes(a.id)),i.success(`${v.value.length} items approved`),v.value=[]}catch{i.error("Failed to approve items")}}async function oe(){try{await new Promise(a=>setTimeout(a,1e3)),m.value=m.value.filter(a=>!v.value.includes(a.id)),i.success(`${v.value.length} items rejected`),v.value=[]}catch{i.error("Failed to reject items")}}function se(a){i.info(`Viewing details for: ${a.name}`)}async function re(a){try{await new Promise(l=>setTimeout(l,1e3));const e=C.value.findIndex(l=>l.id===a);e>-1&&(C.value[e].status="running"),i.success("Workflow retry initiated")}catch{i.error("Failed to retry workflow")}}async function ie(){try{await new Promise(a=>setTimeout(a,1e3)),i.success("Workflow history refreshed")}catch{i.error("Failed to refresh history")}}function ne(){n.value.steps.push({action:""})}function de(a){n.value.steps.splice(a,1)}function U(){k.value=!1,n.value={name:"",type:"",description:"",trigger:"",priority:"Medium",steps:[{action:""}]},T.value={name:""}}async function ue(){if(!n.value.name.trim()){T.value.name="Workflow name is required";return}V.value=!0;try{await new Promise(e=>setTimeout(e,1e3));const a={id:Date.now(),name:n.value.name,type:n.value.type,status:"created",duration:0,created_at:new Date().toISOString()};C.value.unshift(a),i.success("Workflow created successfully!"),U()}catch{i.error("Failed to create workflow")}finally{V.value=!1}}return ve(()=>{}),(a,e)=>(f(),g("div",Ce,[t("div",Se,[e[15]||(e[15]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Workflow Management"),t("p",{class:"text-gray-600"},"Manage approval workflows and system automation")],-1)),t("div",Ve,[s(o(y),{type:"select",modelValue:L.value,"onUpdate:modelValue":e[0]||(e[0]=l=>L.value=l),options:O,placeholder:"Select workflow"},null,8,["modelValue"]),s(o(p),{variant:"primary",onClick:e[1]||(e[1]=l=>k.value=!0)},{default:r(()=>e[14]||(e[14]=[u(" Create Workflow ")])),_:1,__:[14]})])]),t("div",Ae,[s(o(S),{label:"Pending Approvals",value:w.value.pendingApprovals,icon:o(B),"icon-bg":"yellow",change:w.value.pendingChange,"change-unit":"",description:"awaiting action"},null,8,["value","icon","change"]),s(o(S),{label:"Completed Today",value:w.value.completedToday,icon:o(j),"icon-bg":"green",change:w.value.completedChange,"change-unit":"",description:"processed workflows"},null,8,["value","icon","change"]),s(o(S),{label:"Active Workflows",value:w.value.activeWorkflows,icon:o(J),"icon-bg":"blue",change:w.value.activeChange,"change-unit":"",description:"currently running"},null,8,["value","icon","change"]),s(o(S),{label:"Efficiency Rate",value:w.value.efficiencyRate+"%",icon:o(be),"icon-bg":"purple",change:w.value.efficiencyChange,description:"workflow completion"},null,8,["value","icon","change"])]),t("div",We,[s(o(M),{title:"Quick Actions",subtitle:"Common workflow operations"},{default:r(()=>[t("div",Te,[t("div",{class:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:X},[t("div",$e,[t("div",Re,[s(o(j),{class:"w-6 h-6 text-green-600"})]),t("div",null,[e[16]||(e[16]=t("h4",{class:"text-sm font-medium text-gray-900"},"Approve Leaves",-1)),t("p",Pe,c(W.value.length)+" pending",1)])])]),t("div",{class:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:Y},[t("div",Me,[t("div",je,[s(o(ke),{class:"w-6 h-6 text-blue-600"})]),e[17]||(e[17]=t("div",null,[t("h4",{class:"text-sm font-medium text-gray-900"},"Generate Salaries"),t("p",{class:"text-xs text-gray-500"},"For current period")],-1))])]),t("div",{class:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:ee},[t("div",Fe,[t("div",Le,[s(o(he),{class:"w-6 h-6 text-purple-600"})]),e[18]||(e[18]=t("div",null,[t("h4",{class:"text-sm font-medium text-gray-900"},"Send Notifications"),t("p",{class:"text-xs text-gray-500"},"Bulk messaging")],-1))])]),t("div",{class:"p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:te},[t("div",qe,[t("div",Ne,[s(o(_e),{class:"w-6 h-6 text-yellow-600"})]),e[19]||(e[19]=t("div",null,[t("h4",{class:"text-sm font-medium text-gray-900"},"Export Reports"),t("p",{class:"text-xs text-gray-500"},"Monthly summaries")],-1))])])])]),_:1}),s(o(M),{title:"Approval Queue",subtitle:"Items requiring your attention"},{headerActions:r(()=>[s(o(_),{variant:"warning",label:`${m.value.length} pending`},null,8,["label"])]),footer:r(()=>[s(o(p),{variant:"secondary",onClick:e[2]||(e[2]=l=>h.value=!0),"full-width":""},{default:r(()=>e[22]||(e[22]=[u(" View All Pending ")])),_:1,__:[22]})]),default:r(()=>[t("div",Ue,[(f(!0),g(R,null,P(m.value.slice(0,5),l=>(f(),g("div",{key:l.id,class:"flex items-center justify-between p-3 rounded-lg border"},[t("div",De,[e[20]||(e[20]=t("div",{class:"w-2 h-2 rounded-full bg-yellow-500"},null,-1)),t("div",null,[t("p",ze,c(l.title),1),t("p",Be,c(l.description),1),t("p",Je,c($(l.created_at)),1)])]),t("div",Oe,[s(o(_),{variant:N(l.priority),label:l.priority},null,8,["variant","label"]),s(o(p),{variant:"ghost",size:"sm",onClick:b=>le(l.id)},{default:r(()=>e[21]||(e[21]=[u(" Approve ")])),_:2,__:[21]},1032,["onClick"])])]))),128))])]),_:1})]),s(o(M),{title:"System Status",subtitle:"Workflow automation health"},{default:r(()=>[t("div",Ee,[t("div",He,[t("div",Ie,[s(o(j),{class:"w-8 h-8 text-green-600"})]),t("h4",Qe,c(A.value.queueSize),1),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500"},"Queue Size",-1))]),t("div",Ge,[t("div",Ze,[s(o(J),{class:"w-8 h-8 text-blue-600"})]),t("h4",Ke,c(A.value.runningJobs),1),e[24]||(e[24]=t("p",{class:"text-sm text-gray-500"},"Running Jobs",-1))]),t("div",Xe,[t("div",Ye,[s(o(B),{class:"w-8 h-8 text-purple-600"})]),t("h4",et,c(A.value.avgProcessTime),1),e[25]||(e[25]=t("p",{class:"text-sm text-gray-500"},"Avg Process Time",-1))])])]),_:1}),s(o(we),{title:"Workflow History",subtitle:"Recent workflow executions and their status",data:C.value,columns:Q,searchable:"","search-placeholder":"Search workflows...",filterable:!0,filters:G,paginated:!0,"page-size":10},{headerActions:r(()=>[s(o(p),{variant:"secondary",onClick:ie},{default:r(()=>e[26]||(e[26]=[u(" Refresh ")])),_:1,__:[26]})]),"cell-status":r(({value:l})=>[s(o(_),{variant:K(l),label:l},null,8,["variant","label"])]),"cell-type":r(({value:l})=>[s(o(_),{variant:"info",label:l},null,8,["label"])]),"cell-duration":r(({value:l})=>[t("span",tt,c(l)+"s",1)]),"cell-created_at":r(({value:l})=>[t("span",lt,c($(l)),1)]),"cell-actions":r(({item:l})=>[t("div",at,[s(o(p),{variant:"ghost",size:"sm",onClick:b=>se(l)},{default:r(()=>e[27]||(e[27]=[u(" View ")])),_:2,__:[27]},1032,["onClick"]),l.status==="failed"?(f(),fe(o(p),{key:0,variant:"ghost",size:"sm",onClick:b=>re(l.id)},{default:r(()=>e[28]||(e[28]=[u(" Retry ")])),_:2,__:[28]},1032,["onClick"])):me("",!0)])]),_:1},8,["data"]),s(o(z),{show:h.value,"onUpdate:show":e[7]||(e[7]=l=>h.value=l),title:"Bulk Approval",size:"xl"},{footer:r(()=>[t("div",yt,[s(o(p),{variant:"secondary",onClick:e[6]||(e[6]=l=>h.value=!1)},{default:r(()=>e[31]||(e[31]=[u("Close")])),_:1,__:[31]})])]),default:r(()=>[t("div",ot,[t("div",st,[s(o(y),{type:"select",modelValue:x.value.type,"onUpdate:modelValue":e[3]||(e[3]=l=>x.value.type=l),options:E,placeholder:"Filter by type"},null,8,["modelValue"]),s(o(y),{type:"select",modelValue:x.value.priority,"onUpdate:modelValue":e[4]||(e[4]=l=>x.value.priority=l),options:q,placeholder:"Filter by priority"},null,8,["modelValue"])]),t("div",rt,[(f(!0),g(R,null,P(Z.value,l=>(f(),g("div",{key:l.id,class:"flex items-center space-x-3 p-3 border rounded-lg"},[ye(t("input",{type:"checkbox",id:`approval-${l.id}`,"onUpdate:modelValue":e[5]||(e[5]=b=>v.value=b),value:l.id,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,it),[[ge,v.value]]),t("div",nt,[t("div",dt,[t("label",{for:`approval-${l.id}`,class:"text-sm font-medium text-gray-900 cursor-pointer"},c(l.title),9,ut),s(o(_),{variant:N(l.priority),label:l.priority},null,8,["variant","label"])]),t("p",ct,c(l.description),1),t("p",pt,c($(l.created_at)),1)])]))),128))]),t("div",vt,[t("div",ft,c(v.value.length)+" items selected ",1),t("div",mt,[s(o(p),{variant:"danger",onClick:oe,disabled:v.value.length===0},{default:r(()=>e[29]||(e[29]=[u(" Reject Selected ")])),_:1,__:[29]},8,["disabled"]),s(o(p),{variant:"primary",onClick:ae,disabled:v.value.length===0},{default:r(()=>e[30]||(e[30]=[u(" Approve Selected ")])),_:1,__:[30]},8,["disabled"])])])])]),_:1},8,["show"]),s(o(z),{show:k.value,"onUpdate:show":e[13]||(e[13]=l=>k.value=l),title:"Create New Workflow",size:"lg"},{footer:r(()=>[t("div",_t,[s(o(p),{variant:"secondary",onClick:U},{default:r(()=>e[35]||(e[35]=[u("Cancel")])),_:1,__:[35]}),s(o(p),{variant:"primary",onClick:ue,loading:V.value},{default:r(()=>e[36]||(e[36]=[u(" Create Workflow ")])),_:1,__:[36]},8,["loading"])])]),default:r(()=>[t("div",gt,[t("div",wt,[s(o(y),{modelValue:n.value.name,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.name=l),label:"Workflow Name",placeholder:"Enter workflow name",required:!0,error:T.value.name},null,8,["modelValue","error"]),s(o(y),{modelValue:n.value.type,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.type=l),type:"select",label:"Workflow Type",options:H,required:!0},null,8,["modelValue"])]),s(o(y),{modelValue:n.value.description,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.description=l),type:"textarea",label:"Description",placeholder:"Describe the workflow purpose",rows:3},null,8,["modelValue"]),t("div",xt,[s(o(y),{modelValue:n.value.trigger,"onUpdate:modelValue":e[11]||(e[11]=l=>n.value.trigger=l),type:"select",label:"Trigger",options:I,required:!0},null,8,["modelValue"]),s(o(y),{modelValue:n.value.priority,"onUpdate:modelValue":e[12]||(e[12]=l=>n.value.priority=l),type:"select",label:"Priority",options:q,required:!0},null,8,["modelValue"])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Workflow Steps",-1)),t("div",bt,[(f(!0),g(R,null,P(n.value.steps,(l,b)=>(f(),g("div",{key:b,class:"flex items-center space-x-2"},[s(o(y),{modelValue:l.action,"onUpdate:modelValue":D=>l.action=D,placeholder:"Step action",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),s(o(p),{variant:"danger",size:"sm",onClick:D=>de(b)},{default:r(()=>e[32]||(e[32]=[u(" Remove ")])),_:2,__:[32]},1032,["onClick"])]))),128)),s(o(p),{variant:"secondary",onClick:ne},{default:r(()=>e[33]||(e[33]=[u(" Add Step ")])),_:1,__:[33]})])])])]),_:1},8,["show"])]))}});export{jt as default};
