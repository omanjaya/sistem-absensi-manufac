import{d as S,r as p,O as I,o as A,P as O,e as l,E as r,s as t,Q as m,V as y,W as $,F as f,z as b,v as n,f as C}from"./vendor-5hdk-FM1.js";import{a as F,b as V,e as E}from"./index-CpcTDv9q.js";const L={class:"container mx-auto px-4 py-6"},P={class:"bg-white rounded-lg shadow"},B={class:"p-6"},H={class:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4"},U=["value"],j={key:0,class:"text-center py-8"},z={key:1,class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-white divide-y divide-gray-200"},G={class:"px-6 py-4 whitespace-nowrap"},J={class:"text-sm font-medium text-gray-900"},K={class:"text-sm text-gray-500"},N={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},q={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Z={key:2,class:"text-center py-8"},at=S({__name:"AttendanceList",setup(tt){const w=F(),u=p(!1),c=p([]),g=p([]),o=I({startDate:"",endDate:"",employeeId:""}),x=async()=>{var s,e;try{u.value=!0;const a=await V.getAttendances(o);c.value=a.data||[]}catch(a){w.error(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.message)||"Gagal memuat data absensi")}finally{u.value=!1}},h=async()=>{try{const s=await E.getEmployees();g.value=s.data||[]}catch(s){console.error("Failed to fetch employees:",s)}},k=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),v=s=>({present:"bg-green-100 text-green-800",late:"bg-yellow-100 text-yellow-800",absent:"bg-red-100 text-red-800",partial:"bg-orange-100 text-orange-800"})[s]||"bg-gray-100 text-gray-800",_=s=>({present:"Hadir",late:"Terlambat",absent:"Tidak Hadir",partial:"Tidak Lengkap"})[s]||s,D=s=>{if(!s.clock_in||!s.clock_out)return"-";const e=new Date(`${s.date} ${s.clock_in}`),i=new Date(`${s.date} ${s.clock_out}`).getTime()-e.getTime(),d=Math.floor(i/(1e3*60*60)),M=Math.floor(i%(1e3*60*60)/(1e3*60));return`${d}j ${M}m`},T=()=>{const s=new Date,e=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0);o.startDate=e.toISOString().split("T")[0],o.endDate=a.toISOString().split("T")[0]};return A(()=>{T(),h(),x()}),O(o,()=>{x()},{deep:!0}),(s,e)=>(r(),l("div",L,[t("div",P,[e[10]||(e[10]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h1",{class:"text-xl font-semibold text-gray-900"},"Daftar Absensi")],-1)),t("div",B,[t("div",H,[t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Mulai",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.startDate=a),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[y,o.startDate]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Akhir",-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.endDate=a),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[y,o.endDate]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Pegawai",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>o.employeeId=a),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e[5]||(e[5]=t("option",{value:""},"Semua Pegawai",-1)),(r(!0),l(f,null,b(g.value,a=>(r(),l("option",{key:a.id,value:a.id},n(a.name),9,U))),128))],512),[[$,o.employeeId]])])]),u.value?(r(),l("div",j,e[7]||(e[7]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Memuat data...",-1)]))):c.value.length>0?(r(),l("div",z,[t("table",W,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Pegawai "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Check In "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Check Out "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jam Kerja ")])],-1)),t("tbody",Y,[(r(!0),l(f,null,b(c.value,a=>{var i,d;return r(),l("tr",{key:a.id},[t("td",G,[t("div",J,n((i=a.employee)==null?void 0:i.name),1),t("div",K,n((d=a.employee)==null?void 0:d.employee_id),1)]),t("td",N,n(k(a.date)),1),t("td",Q,n(a.clock_in||"-"),1),t("td",R,n(a.clock_out||"-"),1),t("td",q,[t("span",{class:C([v(a.status),"px-2 py-1 text-xs font-medium rounded-full"])},n(_(a.status)),3)]),t("td",X,n(D(a)),1)])}),128))])])])):(r(),l("div",Z,e[9]||(e[9]=[t("p",{class:"text-gray-500"},"Tidak ada data absensi ditemukan.",-1)])))])])]))}});export{at as default};
