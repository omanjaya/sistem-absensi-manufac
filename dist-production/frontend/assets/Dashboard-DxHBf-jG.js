import{e as u,E as o,s as e,d as de,N as me,r as l,c as I,o as ge,b as fe,j as h,q as L,H as n,B as t,v as c,l as r,t as f,T as ve,F as he,z as ye,f as pe,k as _e}from"./vendor-5hdk-FM1.js";import{u as we,a as xe,b as be}from"./index-CpcTDv9q.js";import{_ as y,a as p}from"./Toast.vue_vue_type_style_index_0_scoped_caf7d6d7_lang-C7Vi0Lv3.js";import{_ as T,a as H}from"./MetricCard.vue_vue_type_script_setup_true_lang-MRCzEDgO.js";import{_ as ke}from"./Table.vue_vue_type_script_setup_true_lang-BoFOdIMn.js";import{L as $}from"./LoadingSpinner-DmoD0w9V.js";import{r as _}from"./ClockIcon-CBPLoeYF.js";import{r as Ae}from"./CalendarDaysIcon-C1LUUHP_.js";import{r as P,a as Te}from"./DocumentTextIcon-wyKbqz2l.js";import{r as D}from"./ChartBarIcon-C6LZcBBN.js";import{r as V}from"./CameraIcon-BrnNeVyk.js";import{_ as De}from"./_plugin-vue_export-helper-DlAUqK2U.js";function N(F,m){return o(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const Se={class:"space-y-8"},je={class:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg p-6 text-white"},Ce={class:"flex items-center justify-between"},Ie={class:"text-3xl font-bold mb-2"},Le={class:"text-blue-100 text-lg"},$e={class:"text-blue-200 text-sm mt-1"},Be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Me={class:"flex items-center"},He={class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3"},Pe={class:"flex items-center"},Ve={class:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3"},Ne={class:"flex items-center"},Fe={class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3"},Ge={class:"flex items-center justify-between"},Re={class:"flex items-center"},Ue={key:0,class:"flex justify-center py-8"},qe={key:1,class:"text-center py-8 text-gray-500"},Ee={key:2,class:"space-y-4"},Ke={class:"ml-3 flex-1"},Oe={class:"text-sm font-medium text-gray-900"},Ze={class:"text-xs text-gray-500"},Je={class:"flex items-center justify-between"},Qe={key:0},We={class:"flex items-center"},Xe={class:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-3"},Ye={class:"text-xs font-medium text-gray-600"},et={class:"font-medium text-gray-900"},tt=de({__name:"Dashboard",setup(F){const m=me(),w=we(),S=xe(),B=l(!0),z=l(!1),v=l(!1),x=l(!1),M=l([]),j=l([]),b=l({present:18,workDays:22}),G=l(3),R=l(87),k=l(new Date);let C=null;const U=I(()=>({value:0,direction:"neutral"})),q=I(()=>({value:Math.round(b.value.present/b.value.workDays*100-80),direction:"up"})),E=I(()=>({value:5,direction:"up"})),K=()=>k.value.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),O=()=>k.value.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Z=()=>{const a=k.value.getHours();return a<9?"Belum Masuk":a<17?"Sedang Bekerja":"Sudah Pulang"},J=[{key:"employee",label:"Pegawai"},{key:"date",label:"Tanggal",format:a=>Q(a)},{key:"clock_in",label:"Masuk",format:a=>a||"-"},{key:"clock_out",label:"Keluar",format:a=>a||"-"},{key:"status",label:"Status"}],Q=a=>new Date(a).toLocaleDateString("id-ID"),W=a=>{const s=new Date,A=new Date(a),i=s.getTime()-A.getTime(),d=Math.floor(i/6e4);if(d<1)return"Baru saja";if(d<60)return`${d} menit yang lalu`;const g=Math.floor(d/60);return g<24?`${g} jam yang lalu`:`${Math.floor(g/24)} hari yang lalu`},X=a=>a?a.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"?",Y=a=>{switch(a){case"present":return"success";case"late":return"warning";case"absent":return"danger";default:return"gray"}},ee=a=>{switch(a){case"present":return"Hadir";case"late":return"Terlambat";case"absent":return"Tidak Hadir";default:return"Unknown"}},te=a=>{switch(a){case"attendance":return _;case"leave":return P;case"overtime":return D;default:return _}},ae=a=>{switch(a){case"attendance":return"bg-blue-100 text-blue-600";case"leave":return"bg-yellow-100 text-yellow-600";case"overtime":return"bg-green-100 text-green-600";default:return"bg-gray-100 text-gray-600"}},se=a=>{switch(a){case"attendance":return"primary";case"leave":return"warning";case"overtime":return"success";default:return"gray"}},ne=()=>m.push("/attendance"),re=()=>m.push("/leaves"),ie=()=>m.push("/leaves/create"),oe=()=>m.push("/analytics"),le=()=>m.push("/attendance/list"),ce=async()=>{try{if(z.value=!0,v.value=!0,w.isAdmin){x.value=!0;const a=await be.getAttendances();M.value=a.data.slice(0,5),x.value=!1}await new Promise(a=>setTimeout(a,800)),j.value=[{id:1,type:"attendance",description:"Check-in berhasil",timestamp:new Date(Date.now()-30*60*1e3).toISOString(),status:"Success"},{id:2,type:"leave",description:"Pengajuan izin sakit disetujui",timestamp:new Date(Date.now()-2*60*60*1e3).toISOString(),status:"Approved"}]}catch(a){console.error("Failed to fetch dashboard data:",a),S.error("Gagal memuat data dashboard")}finally{z.value=!1,v.value=!1,B.value=!1}},ue=async()=>{v.value=!0;try{await new Promise(a=>setTimeout(a,500)),S.success("Aktivitas berhasil diperbarui")}catch{S.error("Gagal memperbarui aktivitas")}finally{v.value=!1}};return ge(()=>{ce(),C=window.setInterval(()=>{k.value=new Date},1e3)}),fe(()=>{C&&clearInterval(C)}),(a,s)=>{var A;return o(),u("div",Se,[B.value?(o(),h(t($),{key:0,overlay:!0,text:"Memuat dashboard...",color:"primary",size:"lg"})):L("",!0),e("div",je,[e("div",Ce,[e("div",null,[e("h1",Ie," Selamat datang, "+c((A=t(w).user)==null?void 0:A.name)+"! ðŸ‘‹ ",1),e("p",Le,c(K()),1),e("p",$e,c(O()),1)]),s[0]||(s[0]=e("div",{class:"hidden md:block"},[e("div",{class:"w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center"},[e("svg",{class:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])])],-1))])]),e("div",Be,[n(t(T),{label:"Status Hari Ini",value:Z(),icon:t(_),"icon-bg":"blue",change:U.value.value},null,8,["value","icon","change"]),n(t(T),{label:"Kehadiran Bulan Ini",value:`${b.value.present}/${b.value.workDays}`,description:"Hari kerja",icon:t(Ae),"icon-bg":"green",change:q.value.value},null,8,["value","icon","change"]),n(t(T),{label:"Izin Pending",value:G.value,description:"Request",icon:t(P),"icon-bg":"yellow",hover:"",onClick:re},null,8,["value","icon"]),n(t(T),{label:"Produktivitas",value:`${R.value}%`,icon:t(D),"icon-bg":"indigo",change:E.value.value},null,8,["value","icon","change"])]),e("div",ze,[n(t(p),{class:"hover:shadow-lg transition-shadow duration-300"},{header:r(()=>[e("div",Me,[e("div",He,[n(t(V),{class:"w-6 h-6 text-blue-600"})]),s[1]||(s[1]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Absensi Cepat",-1))])]),footer:r(()=>[n(t(y),{variant:"primary",onClick:ne,"icon-left":t(V),class:"w-full"},{default:r(()=>s[2]||(s[2]=[f(" Buka Absensi ")])),_:1,__:[2]},8,["icon-left"])]),default:r(()=>[s[3]||(s[3]=e("p",{class:"text-gray-600 mb-4"}," Lakukan absensi masuk atau keluar dengan pengenalan wajah ",-1))]),_:1,__:[3]}),n(t(p),{class:"hover:shadow-lg transition-shadow duration-300"},{header:r(()=>[e("div",Pe,[e("div",Ve,[n(t(N),{class:"w-6 h-6 text-yellow-600"})]),s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Pengajuan Izin",-1))])]),footer:r(()=>[n(t(y),{variant:"secondary",onClick:ie,"icon-left":t(N),class:"w-full"},{default:r(()=>s[5]||(s[5]=[f(" Ajukan Izin ")])),_:1,__:[5]},8,["icon-left"])]),default:r(()=>[s[6]||(s[6]=e("p",{class:"text-gray-600 mb-4"}," Ajukan izin sakit, cuti, atau keperluan lainnya ",-1))]),_:1,__:[6]}),t(w).isAdmin?(o(),h(t(p),{key:0,class:"hover:shadow-lg transition-shadow duration-300"},{header:r(()=>[e("div",Ne,[e("div",Fe,[n(t(D),{class:"w-6 h-6 text-green-600"})]),s[7]||(s[7]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Analytics",-1))])]),footer:r(()=>[n(t(y),{variant:"success",onClick:oe,"icon-left":t(D),class:"w-full"},{default:r(()=>s[8]||(s[8]=[f(" Lihat Analytics ")])),_:1,__:[8]},8,["icon-left"])]),default:r(()=>[s[9]||(s[9]=e("p",{class:"text-gray-600 mb-4"}," Lihat laporan dan analisis kehadiran karyawan ",-1))]),_:1,__:[9]})):L("",!0)]),n(t(p),null,{header:r(()=>[e("div",Ge,[e("div",Re,[n(t(_),{class:"w-6 h-6 text-gray-400 mr-2"}),s[10]||(s[10]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Aktivitas Terkini",-1))]),n(t(y),{variant:"ghost",size:"sm",onClick:ue},{default:r(()=>[n(t(Te),{class:"w-4 h-4"})]),_:1})])]),default:r(()=>[v.value?(o(),u("div",Ue,[n(t($),{size:"md",text:"Memuat aktivitas..."})])):j.value.length===0?(o(),u("div",qe,[n(t(_),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s[11]||(s[11]=e("p",null,"Belum ada aktivitas hari ini",-1))])):(o(),u("div",Ee,[n(ve,{name:"activity","enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform translate-y-4 opacity-0","enter-to-class":"transform translate-y-0 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform translate-y-0 opacity-100","leave-to-class":"transform translate-y-4 opacity-0"},{default:r(()=>[(o(!0),u(he,null,ye(j.value,i=>(o(),u("div",{key:i.id,class:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[e("div",{class:pe([ae(i.type),"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center"])},[(o(),h(_e(te(i.type)),{class:"w-4 h-4"}))],2),e("div",Ke,[e("p",Oe,c(i.description),1),e("p",Ze,c(W(i.timestamp)),1)]),n(t(H),{variant:se(i.type)},{default:r(()=>[f(c(i.status),1)]),_:2},1032,["variant"])]))),128))]),_:1})]))]),_:1}),t(w).isAdmin?(o(),h(t(p),{key:1},{header:r(()=>[e("div",Je,[s[13]||(s[13]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Absensi Terkini",-1)),n(t(y),{variant:"ghost",size:"sm",onClick:le},{default:r(()=>s[12]||(s[12]=[f(" Lihat Semua ")])),_:1,__:[12]})])]),default:r(()=>[x.value?(o(),u("div",Qe,[n(t($),{size:"md",text:"Memuat data absensi..."})])):(o(),h(t(ke),{key:1,columns:J,data:M.value,loading:x.value,"show-pagination":"false"},{employee:r(({row:i})=>{var d,g;return[e("div",We,[e("div",Xe,[e("span",Ye,c(X((d=i.employee)==null?void 0:d.name)),1)]),e("span",et,c((g=i.employee)==null?void 0:g.name),1)])]}),status:r(({row:i})=>[n(t(H),{variant:Y(i.status)},{default:r(()=>[f(c(ee(i.status)),1)]),_:2},1032,["variant"])]),_:1},8,["data","loading"]))]),_:1})):L("",!0)])}}}),vt=De(tt,[["__scopeId","data-v-d366edf3"]]);export{vt as default};
