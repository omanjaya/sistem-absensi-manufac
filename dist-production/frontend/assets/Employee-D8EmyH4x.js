import{e as m,E as p,s as e,d as re,r as $,O as Y,c as K,P as Ce,o as Be,y as De,q as w,H as n,B as o,l as g,t as y,v as i,F as G,z as U,f as ce,Q as S,W as L,U as st,V as Z,R as se,j as ue,k as lt}from"./vendor-5hdk-FM1.js";import{a as ot,e as V}from"./index-CpcTDv9q.js";import{_ as x,a as W}from"./Toast.vue_vue_type_style_index_0_scoped_caf7d6d7_lang-C7Vi0Lv3.js";import{a as R,_ as pe}from"./MetricCard.vue_vue_type_script_setup_true_lang-MRCzEDgO.js";import{_ as le}from"./Modal.vue_vue_type_script_setup_true_lang-B2LSZhV7.js";import{_ as T}from"./Form.vue_vue_type_script_setup_true_lang-Cf_hhWd7.js";import{b as Te,r as je,a as nt}from"./XCircleIcon-Das-0Azk.js";import{r as Se}from"./DocumentArrowDownIcon-Cv5EfLmt.js";import{r as rt}from"./UsersIcon-D5zW42zp.js";import{r as oe}from"./CheckCircleIcon-CxojgCya.js";import{a as it,r as dt}from"./DocumentTextIcon-wyKbqz2l.js";import{r as me}from"./XMarkIcon-GNd6XoDh.js";import{r as ut}from"./UserGroupIcon-CVxCyeZM.js";function pt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function mt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})])}function Ve(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function ne(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}function Me(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function Ae(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function ct(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function gt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function vt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function ft(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function yt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}function Ie(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function xt(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function Pe(M,f){return p(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"})])}const bt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ht={class:"space-y-4"},kt={class:"space-y-4"},wt={class:"border-t pt-6"},_t={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$t={key:0,class:"border-t pt-6"},jt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},St={class:"flex items-center justify-end space-x-3 pt-6 border-t"},Mt=re({__name:"EmployeeForm",props:{employee:{default:null},departments:{default:()=>[]}},emits:["save","cancel"],setup(M,{emit:f}){const P=M,C=f,h=$(!1),u=Y({}),d=Y({name:"",email:"",employee_id:"",phone:"",role:"employee",position:"",department:"",join_date:"",basic_salary:5e6,status:"active",password:"",password_confirmation:""}),_=[{value:"admin",label:"Admin Sekolah"},{value:"teacher",label:"Guru"},{value:"staff",label:"Staff"}],E=[{value:"active",label:"Aktif"},{value:"inactive",label:"Nonaktif"}],D=K(()=>[...P.departments,{value:"Guru Matematika",label:"Guru Matematika"},{value:"Guru Bahasa Indonesia",label:"Guru Bahasa Indonesia"},{value:"Guru Bahasa Inggris",label:"Guru Bahasa Inggris"},{value:"Guru IPA",label:"Guru IPA"},{value:"Guru IPS",label:"Guru IPS"},{value:"Guru Seni Budaya",label:"Guru Seni Budaya"},{value:"Guru Olahraga",label:"Guru Olahraga"},{value:"Guru Agama",label:"Guru Agama"},{value:"Wali Kelas",label:"Wali Kelas"},{value:"Kepala Sekolah",label:"Kepala Sekolah"},{value:"Wakil Kepala Sekolah",label:"Wakil Kepala Sekolah"},{value:"Staff TU",label:"Staff Tata Usaha"},{value:"Staff Perpustakaan",label:"Staff Perpustakaan"},{value:"Staff Laboratorium",label:"Staff Laboratorium"},{value:"Satpam",label:"Satpam"},{value:"Cleaning Service",label:"Cleaning Service"}]),F=()=>(Object.keys(u).forEach(s=>delete u[s]),d.name.trim()||(u.name="Nama lengkap wajib diisi"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(u.email="Format email tidak valid"):u.email="Email wajib diisi",d.employee_id.trim()||(u.employee_id="ID Pegawai wajib diisi"),d.role||(u.role="Role wajib dipilih"),d.join_date||(u.join_date="Tanggal bergabung wajib diisi"),(!d.basic_salary||d.basic_salary<0)&&(u.basic_salary="Gaji pokok harus lebih dari 0"),P.employee||(d.password?d.password.length<6&&(u.password="Password minimal 6 karakter"):u.password="Password wajib diisi",d.password!==d.password_confirmation&&(u.password_confirmation="Password konfirmasi tidak cocok")),Object.keys(u).length===0),k=async()=>{if(F()){h.value=!0;try{const s={name:d.name,email:d.email,employee_id:d.employee_id,phone:d.phone||null,role:d.role,position:d.position||null,department:d.department||null,join_date:d.join_date,basic_salary:d.basic_salary,status:d.status,...!P.employee&&{password:d.password,password_confirmation:d.password_confirmation}};C("save",s)}finally{h.value=!1}}};return Ce(()=>P.employee,s=>{s&&Object.assign(d,{name:s.name,email:s.email,employee_id:s.employee_id,phone:s.phone||"",role:"employee",position:s.position||"",department:s.department||"",join_date:s.join_date,basic_salary:5e6,status:s.status})},{immediate:!0}),Be(()=>{P.employee||(d.join_date=new Date().toISOString().split("T")[0])}),(s,l)=>(p(),m("form",{onSubmit:De(k,["prevent"]),class:"space-y-6"},[e("div",bt,[e("div",ht,[l[13]||(l[13]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informasi Dasar",-1)),n(o(T).Input,{modelValue:d.name,"onUpdate:modelValue":l[0]||(l[0]=c=>d.name=c),label:"Nama Lengkap",placeholder:"Masukkan nama lengkap",required:"",error:u.name},null,8,["modelValue","error"]),n(o(T).Input,{modelValue:d.email,"onUpdate:modelValue":l[1]||(l[1]=c=>d.email=c),label:"Email",type:"email",placeholder:"contoh@email.com",required:"",error:u.email},null,8,["modelValue","error"]),n(o(T).Input,{modelValue:d.employee_id,"onUpdate:modelValue":l[2]||(l[2]=c=>d.employee_id=c),label:"NIP/ID Staff",placeholder:"198512345678901234 atau STF001",required:"",error:u.employee_id},null,8,["modelValue","error"]),n(o(T).Input,{modelValue:d.phone,"onUpdate:modelValue":l[3]||(l[3]=c=>d.phone=c),label:"No. Telepon",placeholder:"08123456789",error:u.phone},null,8,["modelValue","error"])]),e("div",kt,[l[14]||(l[14]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Detail Pekerjaan",-1)),n(o(T).Select,{modelValue:d.role,"onUpdate:modelValue":l[4]||(l[4]=c=>d.role=c),label:"Role",placeholder:"Pilih Role",options:_,required:"",error:u.role},null,8,["modelValue","error"]),n(o(T).Input,{modelValue:d.position,"onUpdate:modelValue":l[5]||(l[5]=c=>d.position=c),label:"Jabatan/Mata Pelajaran",placeholder:"Wali Kelas VII-A / Guru Matematika",error:u.position},null,8,["modelValue","error"]),n(o(T).Select,{modelValue:d.department,"onUpdate:modelValue":l[6]||(l[6]=c=>d.department=c),label:"Bidang/Mata Pelajaran",placeholder:"Pilih bidang atau mata pelajaran",options:D.value,editable:"",error:u.department},null,8,["modelValue","options","error"]),n(o(T).Input,{modelValue:d.join_date,"onUpdate:modelValue":l[7]||(l[7]=c=>d.join_date=c),label:"Tanggal Mulai Mengajar",type:"date",required:"",error:u.join_date},null,8,["modelValue","error"])])]),e("div",wt,[l[15]||(l[15]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Informasi Gaji/Honor",-1)),e("div",_t,[n(o(T).Input,{modelValue:d.basic_salary,"onUpdate:modelValue":l[8]||(l[8]=c=>d.basic_salary=c),modelModifiers:{number:!0},label:"Gaji Pokok/Honor",type:"number",placeholder:"3500000",required:"",error:u.basic_salary},null,8,["modelValue","error"]),n(o(T).Select,{modelValue:d.status,"onUpdate:modelValue":l[9]||(l[9]=c=>d.status=c),label:"Status",placeholder:"Pilih Status",options:E,required:"",error:u.status},null,8,["modelValue","error"])])]),s.employee?w("",!0):(p(),m("div",$t,[l[16]||(l[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Password",-1)),e("div",jt,[n(o(T).Input,{modelValue:d.password,"onUpdate:modelValue":l[10]||(l[10]=c=>d.password=c),label:"Password",type:"password",placeholder:"Minimal 6 karakter",required:"",error:u.password},null,8,["modelValue","error"]),n(o(T).Input,{modelValue:d.password_confirmation,"onUpdate:modelValue":l[11]||(l[11]=c=>d.password_confirmation=c),label:"Konfirmasi Password",type:"password",placeholder:"Ulangi password",required:"",error:u.password_confirmation},null,8,["modelValue","error"])])])),e("div",St,[n(o(x),{type:"button",variant:"secondary",onClick:l[12]||(l[12]=c=>s.$emit("cancel"))},{default:g(()=>l[17]||(l[17]=[y(" Batal ")])),_:1,__:[17]}),n(o(x),{type:"submit",variant:"primary",loading:h.value},{default:g(()=>[y(i(s.employee?"Update":"Simpan"),1)]),_:1},8,["loading"])])],32))}}),Pt={class:"space-y-6"},Ct={class:"flex items-start space-x-4"},Bt={class:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-xl font-bold"},Dt={class:"flex-1"},Tt={class:"text-xl font-bold text-gray-900"},Vt={class:"text-gray-600"},At={class:"text-sm text-gray-500"},It={class:"flex items-center space-x-2 mt-2"},Gt={class:"border-b border-gray-200"},Ut={class:"-mb-px flex space-x-8"},Et=["onClick"],Ft={class:"mt-6"},Nt={key:0,class:"space-y-6"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Lt={class:"space-y-4"},Kt={class:"bg-gray-50 p-4 rounded-lg space-y-3"},Ot={class:"flex justify-between"},Rt={class:"text-sm text-gray-900"},Ht={class:"flex justify-between"},Wt={class:"text-sm text-gray-900"},Yt={class:"flex justify-between"},Zt={class:"text-sm text-gray-900"},qt={class:"flex justify-between"},Jt={class:"text-sm text-gray-900"},Qt={class:"space-y-4"},Xt={class:"bg-gray-50 p-4 rounded-lg space-y-3"},ea={class:"flex justify-between"},ta={class:"text-sm text-gray-900"},aa={class:"flex justify-between"},sa={class:"text-sm text-gray-900"},la={class:"flex justify-between"},oa={class:"text-sm text-gray-900"},na={class:"flex justify-between"},ra={class:"text-sm text-gray-900"},ia={class:"flex justify-between"},da={key:1,class:"space-y-6"},ua={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},pa={class:"bg-white border rounded-lg p-6"},ma={class:"space-y-2"},ca={class:"font-medium"},ga={class:"text-sm text-gray-500 ml-2"},va={class:"flex items-center space-x-4"},fa={class:"text-sm text-gray-600"},ya={key:2,class:"space-y-6"},xa={class:"text-center py-12"},ba={class:"flex items-center justify-end space-x-3 pt-6 border-t"},ha=re({__name:"EmployeeDetail",props:{employee:{}},emits:["edit","close"],setup(M,{emit:f}){const P=$("basic"),C=[{id:"basic",name:"Informasi Dasar"},{id:"stats",name:"Statistik"},{id:"documents",name:"Dokumen"}],h=K(()=>({totalAttendance:22,totalHours:176,leavesTaken:5})),u=K(()=>[{date:"2024-12-19",clock_in:"08:15",clock_out:"17:30",status:"present"},{date:"2024-12-18",clock_in:"08:45",clock_out:"17:15",status:"late"},{date:"2024-12-17",clock_in:"08:00",clock_out:"17:00",status:"present"},{date:"2024-12-16",clock_in:null,clock_out:null,status:"absent"},{date:"2024-12-15",clock_in:"08:30",clock_out:"17:45",status:"present"},{date:"2024-12-14",clock_in:"08:10",clock_out:"17:20",status:"present"},{date:"2024-12-13",clock_in:"08:20",clock_out:"17:00",status:"present"}]),d=s=>s.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2),_=s=>new Date(s).toLocaleDateString("id-ID"),E=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long"}),D=s=>{const l=new Date(s),O=Math.abs(new Date().getTime()-l.getTime()),A=Math.ceil(O/(1e3*60*60*24));return A<30?`${A} hari`:A<365?`${Math.floor(A/30)} bulan`:`${Math.floor(A/365)} tahun`},F=s=>({present:"success",late:"warning",absent:"danger",partial:"info"})[s]||"gray",k=s=>({present:"Hadir",late:"Terlambat",absent:"Tidak Hadir",partial:"Sebagian"})[s]||s;return(s,l)=>(p(),m("div",Pt,[e("div",Ct,[e("div",Bt,i(d(s.employee.name)),1),e("div",Dt,[e("h2",Tt,i(s.employee.name),1),e("p",Vt,i(s.employee.position||"No Position"),1),e("p",At,i(s.employee.department||"No Department"),1),e("div",It,[n(o(R),{variant:s.employee.status==="active"?"success":"danger"},{default:g(()=>[y(i(s.employee.status==="active"?"Aktif":"Nonaktif"),1)]),_:1},8,["variant"]),n(o(R),{variant:"info"},{default:g(()=>[y(i(s.employee.employee_id),1)]),_:1})])]),n(o(x),{variant:"primary",size:"sm",onClick:l[0]||(l[0]=c=>s.$emit("edit",s.employee))},{default:g(()=>[n(o(Ie),{class:"w-4 h-4"}),l[3]||(l[3]=y(" Edit "))]),_:1,__:[3]})]),e("div",Gt,[e("nav",Ut,[(p(),m(G,null,U(C,c=>e("button",{key:c.id,onClick:O=>P.value=c.id,class:ce(["whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm",P.value===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},i(c.name),11,Et)),64))])]),e("div",Ft,[P.value==="basic"?(p(),m("div",Nt,[e("div",zt,[e("div",Lt,[l[8]||(l[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informasi Personal",-1)),e("div",Kt,[e("div",Ot,[l[4]||(l[4]=e("span",{class:"text-sm font-medium text-gray-500"},"Nama Lengkap",-1)),e("span",Rt,i(s.employee.name),1)]),e("div",Ht,[l[5]||(l[5]=e("span",{class:"text-sm font-medium text-gray-500"},"Email",-1)),e("span",Wt,i(s.employee.email),1)]),e("div",Yt,[l[6]||(l[6]=e("span",{class:"text-sm font-medium text-gray-500"},"Telepon",-1)),e("span",Zt,i(s.employee.phone||"Tidak ada"),1)]),e("div",qt,[l[7]||(l[7]=e("span",{class:"text-sm font-medium text-gray-500"},"ID Pegawai",-1)),e("span",Jt,i(s.employee.employee_id),1)])])]),e("div",Qt,[l[14]||(l[14]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Informasi Pekerjaan",-1)),e("div",Xt,[e("div",ea,[l[9]||(l[9]=e("span",{class:"text-sm font-medium text-gray-500"},"Posisi",-1)),e("span",ta,i(s.employee.position||"Tidak ada"),1)]),e("div",aa,[l[10]||(l[10]=e("span",{class:"text-sm font-medium text-gray-500"},"Departemen",-1)),e("span",sa,i(s.employee.department||"Tidak ada"),1)]),e("div",la,[l[11]||(l[11]=e("span",{class:"text-sm font-medium text-gray-500"},"Tanggal Bergabung",-1)),e("span",oa,i(_(s.employee.join_date)),1)]),e("div",na,[l[12]||(l[12]=e("span",{class:"text-sm font-medium text-gray-500"},"Masa Kerja",-1)),e("span",ra,i(D(s.employee.join_date)),1)]),e("div",ia,[l[13]||(l[13]=e("span",{class:"text-sm font-medium text-gray-500"},"Status",-1)),n(o(R),{variant:s.employee.status==="active"?"success":"danger"},{default:g(()=>[y(i(s.employee.status==="active"?"Aktif":"Nonaktif"),1)]),_:1},8,["variant"])])])])])])):w("",!0),P.value==="stats"?(p(),m("div",da,[e("div",ua,[n(o(pe),{label:"Total Kehadiran",value:h.value.totalAttendance,description:"Bulan ini","icon-bg":"blue"},null,8,["value"]),n(o(pe),{label:"Jam Kerja",value:`${h.value.totalHours}h`,description:"Bulan ini","icon-bg":"green"},null,8,["value"]),n(o(pe),{label:"Izin Diambil",value:h.value.leavesTaken,description:"Tahun ini","icon-bg":"yellow"},null,8,["value"])]),e("div",pa,[l[15]||(l[15]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Riwayat Kehadiran (7 Hari Terakhir)",-1)),e("div",ma,[(p(!0),m(G,null,U(u.value,c=>(p(),m("div",{key:c.date,class:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0"},[e("div",null,[e("span",ca,i(_(c.date)),1),e("span",ga,i(E(c.date)),1)]),e("div",va,[e("span",fa,i(c.clock_in||"-")+" - "+i(c.clock_out||"-"),1),n(o(R),{variant:F(c.status)},{default:g(()=>[y(i(k(c.status)),1)]),_:2},1032,["variant"])])]))),128))])])])):w("",!0),P.value==="documents"?(p(),m("div",ya,[e("div",xa,[n(o(gt),{class:"mx-auto h-12 w-12 text-gray-400"}),l[16]||(l[16]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Belum ada dokumen",-1)),l[17]||(l[17]=e("p",{class:"mt-1 text-sm text-gray-500"},"Fitur manajemen dokumen akan segera tersedia.",-1))])])):w("",!0)]),e("div",ba,[n(o(x),{variant:"secondary",onClick:l[1]||(l[1]=c=>s.$emit("close"))},{default:g(()=>l[18]||(l[18]=[y(" Tutup ")])),_:1,__:[18]}),n(o(x),{variant:"primary",onClick:l[2]||(l[2]=c=>s.$emit("edit",s.employee))},{default:g(()=>l[19]||(l[19]=[y(" Edit Pegawai ")])),_:1,__:[19]})])]))}}),ka={class:"space-y-6"},wa={class:"text-center"},_a={class:"flex items-center justify-center w-12 h-12 mx-auto bg-blue-100 rounded-full"},$a={class:"mt-4 text-lg font-medium text-gray-900"},ja={class:"bg-gray-50 rounded-lg p-4"},Sa={class:"space-y-2 max-h-32 overflow-y-auto"},Ma={class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold mr-3"},Pa={class:"text-gray-900"},Ca={class:"ml-auto text-gray-500"},Ba={key:0,class:"text-xs text-gray-500 text-center pt-2"},Da={class:"space-y-4"},Ta={key:0,class:"space-y-4"},Va={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3"},Aa={class:"flex"},Ia={class:"ml-3"},Ga={class:"text-sm text-yellow-800"},Ua={key:1,class:"space-y-4"},Ea=["value"],Fa={class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},Na={class:"flex"},za={key:2,class:"space-y-4"},La={key:0},Ka={key:1},Oa={key:3,class:"space-y-4"},Ra={key:0,class:"bg-gray-50 rounded-lg p-4"},Ha={class:"text-sm text-gray-600 space-y-1"},Wa={key:0},Ya={key:1},Za={key:2},qa={key:3},Ja={key:4},Qa={class:"flex justify-end space-x-3 pt-4 border-t"},Xa=re({__name:"BulkActionForm",props:{employees:{}},emits:["action","cancel"],setup(M,{emit:f}){const P=f,C=$(!1),h=$(""),u=Y({status:"",department:"",salary:0,salaryType:"",salaryPercentage:0,position:""}),d=[{value:"Matematika",label:"Matematika"},{value:"Bahasa Indonesia",label:"Bahasa Indonesia"},{value:"Bahasa Inggris",label:"Bahasa Inggris"},{value:"IPA",label:"IPA (Fisika, Kimia, Biologi)"},{value:"IPS",label:"IPS (Sejarah, Geografi, Ekonomi)"},{value:"Seni Budaya",label:"Seni Budaya"},{value:"Olahraga",label:"Pendidikan Jasmani"},{value:"Agama",label:"Pendidikan Agama"},{value:"Wali Kelas",label:"Wali Kelas"},{value:"Kepala Sekolah",label:"Kepala Sekolah"},{value:"Wakil Kepala Sekolah",label:"Wakil Kepala Sekolah"},{value:"Staff TU",label:"Staff Tata Usaha"},{value:"Staff Perpustakaan",label:"Staff Perpustakaan"},{value:"Staff Laboratorium",label:"Staff Laboratorium"},{value:"Satpam",label:"Satuan Pengamanan"},{value:"Cleaning Service",label:"Petugas Kebersihan"}],_=K(()=>{if(!h.value)return!1;switch(h.value){case"status":return!!u.status;case"department":return!!u.department;case"salary":return u.salaryType==="fixed"?u.salary>0:u.salaryType==="percentage"?u.salaryPercentage!==0:!1;case"position":return!!u.position.trim();default:return!1}}),E=k=>k.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2),D=k=>new Intl.NumberFormat("id-ID").format(k),F=async()=>{if(_.value){C.value=!0;try{let k={};switch(h.value){case"status":k={status:u.status};break;case"department":k={department:u.department};break;case"salary":u.salaryType==="fixed"?k={salary:u.salary}:k={salaryPercentage:u.salaryPercentage,salaryType:"percentage"};break;case"position":k={position:u.position};break}P("action",h.value,k)}finally{C.value=!1}}};return(k,s)=>(p(),m("div",ka,[e("div",wa,[e("div",_a,[n(o(Ae),{class:"w-6 h-6 text-blue-600"})]),e("h3",$a,"Aksi Bulk untuk "+i(k.employees.length)+" Pegawai",1),s[8]||(s[8]=e("p",{class:"mt-2 text-sm text-gray-500"}," Pilih aksi yang ingin diterapkan untuk semua pegawai yang dipilih ",-1))]),e("div",ja,[s[9]||(s[9]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Pegawai yang Dipilih:",-1)),e("div",Sa,[(p(!0),m(G,null,U(k.employees.slice(0,3),l=>(p(),m("div",{key:l.id,class:"flex items-center text-sm"},[e("div",Ma,i(E(l.name)),1),e("span",Pa,i(l.name),1),e("span",Ca,i(l.department||"Tidak ada departemen"),1)]))),128)),k.employees.length>3?(p(),m("div",Ba," dan "+i(k.employees.length-3)+" pegawai lainnya... ",1)):w("",!0)])]),e("div",Da,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Pilih Aksi yang Akan Dilakukan ",-1)),S(e("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[10]||(s[10]=[st('<option value="">-- Pilih Aksi --</option><option value="status">Ubah Status</option><option value="department">Ubah Bidang/Mata Pelajaran</option><option value="salary">Ubah Gaji Pokok</option><option value="position">Ubah Jabatan</option>',5)]),512),[[L,h.value]])]),h.value==="status"?(p(),m("div",Ta,[e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status Baru ",-1)),S(e("select",{"onUpdate:modelValue":s[1]||(s[1]=l=>u.status=l),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[12]||(s[12]=[e("option",{value:""},"-- Pilih Status --",-1),e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Non-aktif",-1)]),512),[[L,u.status]])]),e("div",Va,[e("div",Aa,[n(o(vt),{class:"h-5 w-5 text-yellow-400"}),e("div",Ia,[e("p",Ga," Perubahan status akan berlaku untuk semua "+i(k.employees.length)+" pegawai yang dipilih. ",1)])])])])):w("",!0),h.value==="department"?(p(),m("div",Ua,[e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Bidang/Mata Pelajaran Baru ",-1)),S(e("select",{"onUpdate:modelValue":s[2]||(s[2]=l=>u.department=l),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[s[14]||(s[14]=e("option",{value:""},"-- Pilih Bidang --",-1)),(p(),m(G,null,U(d,l=>e("option",{key:l.value,value:l.value},i(l.label),9,Ea)),64))],512),[[L,u.department]])]),e("div",Fa,[e("div",Na,[n(o(Te),{class:"h-5 w-5 text-blue-400"}),s[16]||(s[16]=e("div",{class:"ml-3"},[e("p",{class:"text-sm text-blue-800"}," Perubahan bidang akan mempengaruhi laporan kehadiran dan penggajian pegawai. ")],-1))])])])):w("",!0),h.value==="salary"?(p(),m("div",za,[e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tipe Perubahan Gaji ",-1)),S(e("select",{"onUpdate:modelValue":s[3]||(s[3]=l=>u.salaryType=l),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},s[17]||(s[17]=[e("option",{value:""},"-- Pilih Tipe --",-1),e("option",{value:"fixed"},"Gaji Tetap (Rp)",-1),e("option",{value:"percentage"},"Persentase (%)",-1)]),512),[[L,u.salaryType]])]),u.salaryType==="fixed"?(p(),m("div",La,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Gaji Pokok Baru (Rp) ",-1)),S(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>u.salary=l),type:"number",placeholder:"3000000",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,u.salary,void 0,{number:!0}]])])):w("",!0),u.salaryType==="percentage"?(p(),m("div",Ka,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Persentase Kenaikan/Penurunan (%) ",-1)),S(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>u.salaryPercentage=l),type:"number",placeholder:"10",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,u.salaryPercentage,void 0,{number:!0}]]),s[21]||(s[21]=e("p",{class:"mt-1 text-xs text-gray-500"}," Gunakan nilai positif untuk kenaikan, negatif untuk penurunan ",-1))])):w("",!0)])):w("",!0),h.value==="position"?(p(),m("div",Oa,[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Jabatan Baru ",-1)),S(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>u.position=l),type:"text",placeholder:"Wali Kelas, Guru Senior, Staff Admin, dll",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,u.position]])])])):w("",!0)]),h.value?(p(),m("div",Ra,[s[23]||(s[23]=e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Ringkasan Perubahan:",-1)),e("ul",Ha,[e("li",null,"• "+i(k.employees.length)+" pegawai akan diproses",1),h.value==="status"?(p(),m("li",Wa,"• Status akan diubah menjadi: "+i(u.status==="active"?"Aktif":"Non-aktif"),1)):w("",!0),h.value==="department"?(p(),m("li",Ya,"• Bidang akan diubah menjadi: "+i(u.department),1)):w("",!0),h.value==="salary"&&u.salaryType==="fixed"?(p(),m("li",Za,"• Gaji pokok akan diubah menjadi: Rp "+i(D(u.salary)),1)):w("",!0),h.value==="salary"&&u.salaryType==="percentage"?(p(),m("li",qa,"• Gaji akan "+i(u.salaryPercentage>0?"naik":"turun")+" sebesar "+i(Math.abs(u.salaryPercentage))+"%",1)):w("",!0),h.value==="position"?(p(),m("li",Ja,"• Jabatan akan diubah menjadi: "+i(u.position),1)):w("",!0)])])):w("",!0),e("div",Qa,[n(o(x),{variant:"ghost",onClick:s[7]||(s[7]=l=>k.$emit("cancel"))},{default:g(()=>s[24]||(s[24]=[y(" Batal ")])),_:1,__:[24]}),n(o(x),{variant:"primary",onClick:F,disabled:!_.value,loading:C.value},{default:g(()=>[n(o(Ve),{class:"w-4 h-4"}),s[25]||(s[25]=y(" Terapkan Perubahan "))]),_:1,__:[25]},8,["disabled","loading"])])]))}}),es={class:"space-y-6"},ts={class:"flex items-center justify-between"},as={class:"flex space-x-3"},ss={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ls={class:"flex items-center"},os={class:"flex-shrink-0"},ns={class:"ml-4"},rs={class:"text-2xl font-bold text-gray-900"},is={class:"flex items-center"},ds={class:"flex-shrink-0"},us={class:"ml-4"},ps={class:"text-2xl font-bold text-gray-900"},ms={class:"text-xs text-green-600"},cs={class:"flex items-center"},gs={class:"flex-shrink-0"},vs={class:"ml-4"},fs={class:"text-2xl font-bold text-gray-900"},ys={class:"text-xs text-purple-600"},xs={class:"flex items-center"},bs={class:"flex-shrink-0"},hs={class:"ml-4"},ks={class:"text-2xl font-bold text-gray-900"},ws={class:"text-xs text-yellow-600"},_s={class:"space-y-4"},$s={class:"flex items-center justify-between"},js={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ss={class:"relative"},Ms=["value"],Ps={class:"border-t pt-4"},Cs={key:0,class:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4"},Bs=["value"],Ds={class:"flex space-x-2"},Ts={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Vs={class:"flex items-center justify-between"},As={class:"flex items-center space-x-3"},Is={class:"text-sm font-medium text-blue-800"},Gs={class:"flex space-x-2"},Us={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},Es={class:"flex items-center space-x-3"},Fs={class:"text-sm text-gray-500"},Ns={class:"overflow-x-auto"},zs={class:"min-w-full divide-y divide-gray-200"},Ls={class:"bg-gray-50"},Ks={class:"px-6 py-3 text-left"},Os=["checked"],Rs={class:"bg-white divide-y divide-gray-200"},Hs={class:"px-6 py-4 whitespace-nowrap"},Ws=["value"],Ys={class:"px-6 py-4 whitespace-nowrap"},Zs={class:"flex items-center space-x-3"},qs={class:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-bold"},Js={class:"text-sm font-medium text-gray-900"},Qs={class:"text-sm text-gray-500"},Xs={class:"px-6 py-4 whitespace-nowrap"},el={class:"text-sm text-gray-900"},tl={class:"text-sm text-gray-500"},al={class:"px-6 py-4 whitespace-nowrap"},sl={class:"text-sm text-gray-900"},ll={class:"text-sm text-gray-500"},ol={class:"px-6 py-4 whitespace-nowrap"},nl={class:"px-6 py-4 whitespace-nowrap"},rl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},il={class:"text-xs text-gray-500"},dl={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ul={class:"flex space-x-1"},pl={key:2},ml={colspan:"8",class:"px-6 py-12 text-center"},cl={class:"mt-6"},gl={key:0,class:"px-6 py-4 border-t border-gray-200"},vl={class:"flex items-center justify-between"},fl={class:"text-sm text-gray-500"},yl={class:"flex space-x-1"},xl={class:"space-y-6"},bl={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},hl={class:"flex"},kl={class:"border border-gray-200 rounded-lg p-4"},wl={class:"flex items-center justify-between bg-gray-50 rounded-lg p-3"},_l={class:"flex items-center"},$l={class:"border border-gray-200 rounded-lg p-4"},jl={key:0},Sl={class:"mt-4"},Ml={class:"text-sm text-gray-600"},Pl={key:1,class:"flex items-center justify-center"},Cl={class:"ml-3"},Bl={class:"text-sm font-medium text-gray-900"},Dl={class:"text-xs text-gray-500"},Tl={class:"mt-4 space-y-3"},Vl={class:"flex items-center"},Al={class:"flex items-center"},Il={class:"flex items-center"},Gl={key:0,class:"border border-gray-200 rounded-lg p-4"},Ul={class:"text-sm font-medium text-gray-900 mb-3"},El={class:"max-h-64 overflow-auto"},Fl={class:"min-w-full text-xs"},Nl={class:"divide-y divide-gray-200"},zl={class:"px-2 py-1"},Ll={class:"px-2 py-1"},Kl={class:"px-2 py-1"},Ol={class:"px-2 py-1"},Rl={class:"px-2 py-1"},Hl={key:0,class:"text-red-600 text-xs"},Wl={key:1,class:"text-green-600 text-xs"},Yl={key:0,class:"text-xs text-gray-500 mt-2 text-center"},Zl={key:1,class:"grid grid-cols-3 gap-4"},ql={class:"bg-green-50 border border-green-200 rounded-lg p-3 text-center"},Jl={class:"text-lg font-bold text-green-800"},Ql={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-center"},Xl={class:"text-lg font-bold text-yellow-800"},eo={class:"bg-red-50 border border-red-200 rounded-lg p-3 text-center"},to={class:"text-lg font-bold text-red-800"},ao={class:"flex justify-end space-x-3 pt-4 border-t"},yo=re({__name:"Employee",setup(M){const f=ot(),P=(r,t)=>{let a;return(...v)=>{clearTimeout(a),a=setTimeout(()=>r.apply(null,v),t)}},C=$(!1),h=$(!1),u=$(!1),d=$([]),_=$([]),E=$(null),D=$(null),F=$(!1),k=$(!1),s=$(null),l=$([]),c=$(null),O=$(!1),A=$(null),B=Y({skipDuplicates:!0,updateExisting:!1,validateOnly:!1}),q=$(!1),J=$(!1),H=$(!1),X=$(!1),ee=$(!1),b=Y({search:"",department:"",status:"",role:"",joinYear:"",salaryMin:"",salaryMax:"",sortBy:""}),j=Y({current_page:1,per_page:15,total:0,last_page:1}),N=K(()=>{const r=Array.isArray(d.value)?d.value:[],t=r.length,a=r.filter(Q=>Q.status==="active").length,v=r.filter(Q=>Q.department==="Guru").length,I=r.filter(Q=>{const _e=new Date(Q.join_date),$e=new Date;return _e.getMonth()===$e.getMonth()&&_e.getFullYear()===$e.getFullYear()}).length;return{total:t,active:a,teachers:v,newThisMonth:I}}),ge=K(()=>{const r=Array.isArray(d.value)?d.value:[];return[...new Set(r.map(a=>a.department).filter(Boolean))].map(a=>({value:a,label:a}))}),Ge=K(()=>[{value:"",label:"Semua Departemen"},...ge.value]),Ue=K(()=>{const r=new Date().getFullYear();return Array.from({length:10},(t,a)=>r-a)}),z=async()=>{try{C.value=!0;const r=await V.getEmployees({page:j.current_page,per_page:j.per_page,search:b.search,department:b.department,status:b.status});d.value=Array.isArray(r.data)?r.data:[],r.current_page!==void 0&&Object.assign(j,{current_page:r.current_page||1,per_page:r.per_page||15,total:r.total||0,last_page:r.last_page||1})}catch(r){f.error("Gagal memuat data pegawai"),console.error("Fetch employees error:",r),d.value=[]}finally{C.value=!1}},Ee=P(()=>{j.current_page=1,z()},300),ie=r=>{j.current_page=r,z()},Fe=r=>{E.value=r,J.value=!0},ve=r=>{D.value=r,q.value=!0},Ne=r=>{J.value=!1,ve(r)},ze=async r=>{try{const t=r.status==="active"?"inactive":"active";await V.updateEmployee(r.id,{status:t}),r.status=t,f.success(`Pegawai berhasil ${t==="active"?"diaktifkan":"dinonaktifkan"}`)}catch{f.error("Gagal mengubah status pegawai")}},Le=async r=>{var t,a;try{D.value?(await V.updateEmployee(D.value.id,r),f.success("Data pegawai berhasil diperbarui")):(await V.createEmployee(r),f.success("Pegawai baru berhasil ditambahkan")),de(),z()}catch(v){f.error(((a=(t=v.response)==null?void 0:t.data)==null?void 0:a.message)||"Gagal menyimpan data pegawai")}},de=()=>{q.value=!1,D.value=null},fe=()=>{_.value.length===d.value.length?_.value=[]:_.value=[...d.value]},ye=async r=>{try{const t=_.value.map(a=>a.id);switch(r){case"activate":await Promise.all(t.map(a=>V.updateEmployee(a,{status:"active"}))),f.success(`${t.length} pegawai berhasil diaktifkan`);break;case"deactivate":await Promise.all(t.map(a=>V.updateEmployee(a,{status:"inactive"}))),f.success(`${t.length} pegawai berhasil dinonaktifkan`);break}H.value=!1,_.value=[],z()}catch{f.error("Gagal melakukan aksi bulk")}},Ke=async(r,t)=>{try{const a=_.value.map(v=>v.id);switch(r){case"department":await Promise.all(a.map(v=>V.updateEmployee(v,{department:t.department}))),f.success(`Departemen ${a.length} pegawai berhasil diubah`);break;case"status":await Promise.all(a.map(v=>V.updateEmployee(v,{status:t.status}))),f.success(`Status ${a.length} pegawai berhasil diubah`);break}_.value=[],H.value=!1,await z()}catch{f.error("Gagal melakukan aksi bulk")}},te=r=>{b.sortBy=r,z()},Oe=async()=>{try{h.value=!0,f.success("Data pegawai berhasil diekspor")}catch{f.error("Gagal mengekspor data")}finally{h.value=!1}},Re=r=>!r||typeof r!="string"?"NA":r.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),He=r=>new Date(r).toLocaleDateString("id-ID"),We=r=>{const t=new Date(r),v=Math.abs(new Date().getTime()-t.getTime()),I=Math.ceil(v/(1e3*60*60*24));return I<30?`${I} hari`:I<365?`${Math.floor(I/30)} bulan`:`${Math.floor(I/365)} tahun`},xe=r=>"employee",Ye=r=>{switch(r){case"teacher":return"info";case"staff":return"gray";case"admin":return"primary";default:return"gray"}},Ze=r=>{switch(r){case"teacher":return"Guru";case"staff":return"Staff";case"admin":return"Admin";default:return"Pegawai"}},be=(r,t)=>t===0?0:Math.round(r/t*100),qe=()=>{const r=[];for(let t=1;t<=j.last_page;t++)r.push(t);return r},Je=()=>{b.search="",b.department="",b.status="",b.role="",b.joinYear="",b.salaryMin="",b.salaryMax="",b.sortBy="",j.current_page=1,z()},he=async()=>{try{u.value=!0;const r=await V.downloadTemplate(),t=document.createElement("a");t.href=URL.createObjectURL(r),t.download=`Template_Data_Guru_Staff_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(t),t.click(),document.body.removeChild(t),f.success("Template berhasil didownload")}catch{f.error("Gagal mendownload template")}finally{u.value=!1}},Qe=r=>{var v;const a=(v=r.target.files)==null?void 0:v[0];a&&(s.value=a,ae())},Xe=r=>{var a;r.preventDefault(),O.value=!1;const t=(a=r.dataTransfer)==null?void 0:a.files;if(t&&t.length>0){const v=t[0];v.type.includes("spreadsheet")||v.name.endsWith(".xlsx")||v.name.endsWith(".xls")?(s.value=v,ae()):f.error("Format file tidak didukung. Gunakan file Excel (.xlsx atau .xls)")}},ke=()=>{s.value=null,ae(),A.value&&(A.value.value="")},et=r=>{if(r===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(r)/Math.log(t));return parseFloat((r/Math.pow(t,v)).toFixed(2))+" "+a[v]},ae=()=>{l.value=[],c.value=null},tt=async()=>{var r,t;if(s.value)try{k.value=!0;const a=new FormData;a.append("file",s.value);const v=await V.previewImport(a);v.success?(l.value=v.data.preview,c.value=v.data.summary,f.success("Preview data berhasil dimuat")):f.error(v.message||"Gagal memproses file")}catch(a){f.error(((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal memproses file")}finally{k.value=!1}},at=async()=>{var r,t;if(!(!s.value||!c.value))try{F.value=!0;const a=new FormData;a.append("file",s.value);const v=await V.executeImport(a,{skip_duplicates:B.skipDuplicates,update_existing:B.updateExisting,validate_only:B.validateOnly});v.success?(f.success(v.message),B.validateOnly||(we(),z())):f.error(v.message||"Gagal mengimport data")}catch(a){f.error(((t=(r=a.response)==null?void 0:r.data)==null?void 0:t.message)||"Gagal mengimport data")}finally{F.value=!1}},we=()=>{ee.value=!1,ke(),ae(),B.skipDuplicates=!0,B.updateExisting=!1,B.validateOnly=!1};return Ce(()=>b.search,Ee),Be(()=>{z()}),(r,t)=>(p(),m("div",es,[e("div",ts,[t[38]||(t[38]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Manajemen Guru & Staff"),e("p",{class:"text-gray-600"},"Kelola data guru dan staff sekolah")],-1)),e("div",as,[n(o(x),{variant:"ghost",onClick:he,loading:u.value},{default:g(()=>[n(o(Se),{class:"w-4 h-4"}),t[34]||(t[34]=y(" Download Template "))]),_:1,__:[34]},8,["loading"]),n(o(x),{variant:"secondary",onClick:t[0]||(t[0]=a=>ee.value=!0)},{default:g(()=>[n(o(ct),{class:"w-4 h-4"}),t[35]||(t[35]=y(" Import Excel "))]),_:1,__:[35]}),n(o(x),{variant:"secondary",onClick:Oe,loading:h.value},{default:g(()=>[n(o(Se),{class:"w-4 h-4"}),t[36]||(t[36]=y(" Export Excel "))]),_:1,__:[36]},8,["loading"]),n(o(x),{variant:"primary",onClick:t[1]||(t[1]=a=>q.value=!0)},{default:g(()=>[n(o(Pe),{class:"w-4 h-4"}),t[37]||(t[37]=y(" Tambah Guru/Staff "))]),_:1,__:[37]})])]),e("div",ss,[n(o(W),{class:"p-6"},{default:g(()=>[e("div",ls,[e("div",os,[n(o(rt),{class:"h-8 w-8 text-blue-600"})]),e("div",ns,[t[39]||(t[39]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Guru & Staff",-1)),e("p",rs,i(N.value.total),1)])])]),_:1}),n(o(W),{class:"p-6"},{default:g(()=>[e("div",is,[e("div",ds,[n(o(oe),{class:"h-8 w-8 text-green-600"})]),e("div",us,[t[40]||(t[40]=e("p",{class:"text-sm font-medium text-gray-500"},"Aktif",-1)),e("p",ps,i(N.value.active),1),e("p",ms,i(be(N.value.active,N.value.total))+"%",1)])])]),_:1}),n(o(W),{class:"p-6"},{default:g(()=>[e("div",cs,[e("div",gs,[n(o(pt),{class:"h-8 w-8 text-purple-600"})]),e("div",vs,[t[41]||(t[41]=e("p",{class:"text-sm font-medium text-gray-500"},"Guru",-1)),e("p",fs,i(N.value.teachers),1),e("p",ys,i(be(N.value.teachers,N.value.total))+"%",1)])])]),_:1}),n(o(W),{class:"p-6"},{default:g(()=>[e("div",xs,[e("div",bs,[n(o(xt),{class:"h-8 w-8 text-yellow-600"})]),e("div",hs,[t[42]||(t[42]=e("p",{class:"text-sm font-medium text-gray-500"},"Baru Bulan Ini",-1)),e("p",ks,i(N.value.newThisMonth),1),e("p",ws,"+"+i(N.value.newThisMonth)+" orang",1)])])]),_:1})]),n(o(W),{class:"p-6"},{default:g(()=>[e("div",_s,[e("div",$s,[t[44]||(t[44]=e("h3",{class:"text-lg font-medium text-gray-900"},"Filter & Pencarian",-1)),n(o(x),{variant:"ghost",size:"sm",onClick:Je},{default:g(()=>[n(o(it),{class:"w-4 h-4"}),t[43]||(t[43]=y(" Reset Filter "))]),_:1,__:[43]})]),e("div",js,[e("div",Ss,[n(o(yt),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>b.search=a),type:"text",placeholder:"Cari nama, NIP, email...",class:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,b.search]])]),S(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>b.department=a),class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[45]||(t[45]=e("option",{value:""},"Semua Bidang",-1)),(p(!0),m(G,null,U(Ge.value,a=>(p(),m("option",{key:a.value,value:a.value},i(a.label),9,Ms))),128))],512),[[L,b.department]]),S(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>b.status=a),class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},t[46]||(t[46]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"active"},"Aktif",-1),e("option",{value:"inactive"},"Non-aktif",-1)]),512),[[L,b.status]]),S(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>b.role=a),class:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},t[47]||(t[47]=[e("option",{value:""},"Semua Role",-1),e("option",{value:"teacher"},"Guru",-1),e("option",{value:"staff"},"Staff",-1),e("option",{value:"admin"},"Admin",-1)]),512),[[L,b.role]])]),e("div",Ps,[n(o(x),{variant:"ghost",size:"sm",onClick:t[6]||(t[6]=a=>X.value=!X.value)},{default:g(()=>[n(o(ft),{class:"w-4 h-4"}),y(" "+i(X.value?"Sembunyikan":"Tampilkan")+" Pencarian Lanjutan ",1)]),_:1}),X.value?(p(),m("div",Cs,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tahun Bergabung",-1)),S(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>b.joinYear=a),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t[48]||(t[48]=e("option",{value:""},"Semua Tahun",-1)),(p(!0),m(G,null,U(Ue.value,a=>(p(),m("option",{key:a,value:a},i(a),9,Bs))),128))],512),[[L,b.joinYear]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Range Gaji (Juta)",-1)),e("div",Ds,[S(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>b.salaryMin=a),type:"number",placeholder:"Min",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,b.salaryMin,void 0,{number:!0}]]),S(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>b.salaryMax=a),type:"number",placeholder:"Max",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Z,b.salaryMax,void 0,{number:!0}]])])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sortir Berdasarkan",-1)),S(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>b.sortBy=a),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},t[51]||(t[51]=[e("option",{value:"name"},"Nama",-1),e("option",{value:"join_date"},"Tanggal Bergabung",-1),e("option",{value:"department"},"Bidang",-1),e("option",{value:"status"},"Status",-1)]),512),[[L,b.sortBy]])])])):w("",!0)])])]),_:1}),_.value.length>0?(p(),m("div",Ts,[e("div",Vs,[e("div",As,[n(o(oe),{class:"w-5 h-5 text-blue-600"}),e("span",Is,i(_.value.length)+" guru/staff dipilih ",1)]),e("div",Gs,[n(o(x),{variant:"secondary",size:"sm",onClick:t[11]||(t[11]=a=>ye("activate")),disabled:C.value},{default:g(()=>[n(o(Ve),{class:"w-4 h-4"}),t[53]||(t[53]=y(" Aktifkan "))]),_:1,__:[53]},8,["disabled"]),n(o(x),{variant:"secondary",size:"sm",onClick:t[12]||(t[12]=a=>ye("deactivate")),disabled:C.value},{default:g(()=>[n(o(me),{class:"w-4 h-4"}),t[54]||(t[54]=y(" Non-aktifkan "))]),_:1,__:[54]},8,["disabled"]),n(o(x),{variant:"secondary",size:"sm",onClick:t[13]||(t[13]=a=>H.value=!0),disabled:C.value},{default:g(()=>[n(o(Ae),{class:"w-4 h-4"}),t[55]||(t[55]=y(" Aksi Lainnya "))]),_:1,__:[55]},8,["disabled"]),n(o(x),{variant:"ghost",size:"sm",onClick:t[14]||(t[14]=a=>_.value=[])},{default:g(()=>[n(o(me),{class:"w-4 h-4"}),t[56]||(t[56]=y(" Batal "))]),_:1,__:[56]})])])])):w("",!0),n(o(W),null,{default:g(()=>[e("div",Us,[t[57]||(t[57]=e("h3",{class:"text-lg font-medium text-gray-900"},"Daftar Guru & Staff",-1)),e("div",Es,[e("span",Fs," Menampilkan "+i(d.value.length)+" dari "+i(j.total)+" data ",1),n(o(x),{variant:"ghost",size:"sm",onClick:fe},{default:g(()=>[y(i(_.value.length===d.value.length?"Batalkan Semua":"Pilih Semua"),1)]),_:1})])]),e("div",Ns,[e("table",zs,[e("thead",Ls,[e("tr",null,[e("th",Ks,[e("input",{type:"checkbox",checked:_.value.length===d.value.length&&d.value.length>0,onChange:fe,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,Os)]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[15]||(t[15]=a=>te("name"))},[t[58]||(t[58]=y(" Guru/Staff ")),n(o(ne),{class:"w-4 h-4 inline ml-1"})]),t[62]||(t[62]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kontak ",-1)),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[16]||(t[16]=a=>te("department"))},[t[59]||(t[59]=y(" Bidang/Mata Pelajaran ")),n(o(ne),{class:"w-4 h-4 inline ml-1"})]),t[63]||(t[63]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role ",-1)),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[17]||(t[17]=a=>te("status"))},[t[60]||(t[60]=y(" Status ")),n(o(ne),{class:"w-4 h-4 inline ml-1"})]),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:t[18]||(t[18]=a=>te("join_date"))},[t[61]||(t[61]=y(" Bergabung ")),n(o(ne),{class:"w-4 h-4 inline ml-1"})]),t[64]||(t[64]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ",-1))])]),e("tbody",Rs,[C.value?(p(),m(G,{key:0},U(5,a=>e("tr",{key:`loading-${a}`,class:"animate-pulse"},t[65]||(t[65]=[e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"h-4 bg-gray-200 rounded w-4"})],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"h-10 w-10 bg-gray-200 rounded-full"}),e("div",{class:"space-y-2"},[e("div",{class:"h-4 bg-gray-200 rounded w-24"}),e("div",{class:"h-3 bg-gray-200 rounded w-16"})])])],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"space-y-2"},[e("div",{class:"h-3 bg-gray-200 rounded w-32"}),e("div",{class:"h-3 bg-gray-200 rounded w-24"})])],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"h-4 bg-gray-200 rounded w-20"})],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"h-4 bg-gray-200 rounded w-16"})],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"h-6 bg-gray-200 rounded w-16"})],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"h-4 bg-gray-200 rounded w-20"})],-1),e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("div",{class:"flex space-x-1"},[e("div",{class:"h-6 w-6 bg-gray-200 rounded"}),e("div",{class:"h-6 w-6 bg-gray-200 rounded"}),e("div",{class:"h-6 w-6 bg-gray-200 rounded"})])],-1)]))),64)):(p(!0),m(G,{key:1},U(d.value,a=>(p(),m("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Hs,[S(e("input",{type:"checkbox",value:a,"onUpdate:modelValue":t[19]||(t[19]=v=>_.value=v),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,Ws),[[se,_.value]])]),e("td",Ys,[e("div",Zs,[e("div",qs,i(Re(a.name)),1),e("div",null,[e("div",Js,i(a.name),1),e("div",Qs,i(a.employee_id),1)])])]),e("td",Xs,[e("div",el,i(a.email),1),e("div",tl,i(a.phone||"Tidak ada"),1)]),e("td",al,[e("div",sl,i(a.department||"Belum ditentukan"),1),e("div",ll,i(a.position||"Tidak ada jabatan"),1)]),e("td",ol,[n(o(R),{variant:Ye(xe(a))},{default:g(()=>[y(i(Ze(xe(a))),1)]),_:2},1032,["variant"])]),e("td",nl,[n(o(R),{variant:a.status==="active"?"success":"danger"},{default:g(()=>[y(i(a.status==="active"?"Aktif":"Non-aktif"),1)]),_:2},1032,["variant"])]),e("td",rl,[e("div",null,i(He(a.join_date)),1),e("div",il,i(We(a.join_date)),1)]),e("td",dl,[e("div",ul,[n(o(x),{variant:"ghost",size:"sm",onClick:v=>Fe(a),title:"Lihat Detail"},{default:g(()=>[n(o(je),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),n(o(x),{variant:"ghost",size:"sm",onClick:v=>ve(a),title:"Edit"},{default:g(()=>[n(o(Ie),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),n(o(x),{variant:"ghost",size:"sm",onClick:v=>ze(a),class:ce(a.status==="active"?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"),title:a.status==="active"?"Nonaktifkan":"Aktifkan"},{default:g(()=>[(p(),ue(lt(a.status==="active"?o(nt):o(oe)),{class:"w-4 h-4"}))]),_:2},1032,["onClick","class","title"])])])]))),128)),!C.value&&d.value.length===0?(p(),m("tr",pl,[e("td",ml,[n(o(ut),{class:"mx-auto h-12 w-12 text-gray-400"}),t[67]||(t[67]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada data guru/staff",-1)),t[68]||(t[68]=e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan menambahkan guru atau staff baru.",-1)),e("div",cl,[n(o(x),{variant:"primary",onClick:t[20]||(t[20]=a=>q.value=!0)},{default:g(()=>[n(o(Pe),{class:"w-4 h-4"}),t[66]||(t[66]=y(" Tambah Guru/Staff "))]),_:1,__:[66]})])])])):w("",!0)])])]),j.last_page>1?(p(),m("div",gl,[e("div",vl,[e("div",fl," Menampilkan "+i((j.current_page-1)*j.per_page+1)+" sampai "+i(Math.min(j.current_page*j.per_page,j.total))+" dari "+i(j.total)+" data ",1),e("div",yl,[n(o(x),{variant:"ghost",size:"sm",onClick:t[21]||(t[21]=a=>ie(j.current_page-1)),disabled:j.current_page<=1},{default:g(()=>t[69]||(t[69]=[y(" Sebelumnya ")])),_:1,__:[69]},8,["disabled"]),(p(!0),m(G,null,U(qe(),a=>(p(),ue(o(x),{key:a,variant:a===j.current_page?"primary":"ghost",size:"sm",onClick:v=>ie(a)},{default:g(()=>[y(i(a),1)]),_:2},1032,["variant","onClick"]))),128)),n(o(x),{variant:"ghost",size:"sm",onClick:t[22]||(t[22]=a=>ie(j.current_page+1)),disabled:j.current_page>=j.last_page},{default:g(()=>t[70]||(t[70]=[y(" Selanjutnya ")])),_:1,__:[70]},8,["disabled"])])])])):w("",!0)]),_:1}),n(o(le),{show:q.value,onClose:de,title:D.value?"Edit Guru/Staff":"Tambah Guru/Staff Baru",size:"xl"},{default:g(()=>[n(Mt,{employee:D.value,departments:ge.value,onSave:Le,onCancel:de},null,8,["employee","departments"])]),_:1},8,["show","title"]),n(o(le),{show:J.value,onClose:t[24]||(t[24]=a=>J.value=!1),title:"Detail Guru/Staff",size:"xl"},{default:g(()=>[E.value?(p(),ue(ha,{key:0,employee:E.value,onEdit:Ne,onClose:t[23]||(t[23]=a=>J.value=!1)},null,8,["employee"])):w("",!0)]),_:1},8,["show"]),n(o(le),{show:H.value,onClose:t[26]||(t[26]=a=>H.value=!1),title:"Aksi Bulk",size:"lg"},{default:g(()=>[n(Xa,{employees:_.value,onAction:Ke,onCancel:t[25]||(t[25]=a=>H.value=!1)},null,8,["employees"])]),_:1},8,["show"]),n(o(le),{show:ee.value,onClose:t[33]||(t[33]=a=>ee.value=!1),title:"Import Data Guru & Staff",size:"lg"},{default:g(()=>[e("div",xl,[e("div",bl,[e("div",hl,[n(o(Te),{class:"h-5 w-5 text-blue-400 mt-0.5"}),t[71]||(t[71]=e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-medium text-blue-800"},"Cara Import Data"),e("div",{class:"mt-2 text-sm text-blue-700"},[e("ol",{class:"list-decimal list-inside space-y-1"},[e("li",null,"Download template Excel terlebih dahulu"),e("li",null,"Isi data guru & staff sesuai format template"),e("li",null,"Upload file yang sudah diisi"),e("li",null,"Pastikan format tanggal: DD/MM/YYYY"),e("li",null,"Email harus unik untuk setiap guru/staff")])])],-1))])]),e("div",kl,[t[74]||(t[74]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"1. Download Template Excel",-1)),e("div",wl,[e("div",_l,[n(o(dt),{class:"h-8 w-8 text-green-600"}),t[72]||(t[72]=e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Template_Data_Guru_Staff.xlsx"),e("p",{class:"text-xs text-gray-500"},"Template standar untuk import data guru dan staff sekolah")],-1))]),n(o(x),{variant:"outline",size:"sm",onClick:he,loading:u.value},{default:g(()=>[n(o(mt),{class:"w-4 h-4"}),t[73]||(t[73]=y(" Download "))]),_:1,__:[73]},8,["loading"])])]),e("div",$l,[t[81]||(t[81]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"2. Upload File Excel",-1)),e("div",{class:ce(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",{"border-blue-400 bg-blue-50":O.value}]),onDrop:Xe,onDragover:t[28]||(t[28]=De(a=>O.value=!0,["prevent"])),onDragleave:t[29]||(t[29]=a=>O.value=!1)},[e("input",{ref_key:"fileInput",ref:A,type:"file",accept:".xlsx,.xls",onChange:Qe,class:"hidden"},null,544),s.value?(p(),m("div",Pl,[n(o(oe),{class:"h-8 w-8 text-green-500"}),e("div",Cl,[e("p",Bl,i(s.value.name),1),e("p",Dl,i(et(s.value.size)),1)]),n(o(x),{variant:"ghost",size:"sm",onClick:ke,class:"ml-2"},{default:g(()=>[n(o(me),{class:"w-4 h-4"})]),_:1})])):(p(),m("div",jl,[n(o(Me),{class:"mx-auto h-12 w-12 text-gray-400"}),e("div",Sl,[e("p",Ml,[n(o(x),{variant:"ghost",onClick:t[27]||(t[27]=a=>{var v;return(v=A.value)==null?void 0:v.click()})},{default:g(()=>t[75]||(t[75]=[y(" Klik untuk upload ")])),_:1,__:[75]}),t[76]||(t[76]=y(" atau drag & drop file Excel "))]),t[77]||(t[77]=e("p",{class:"text-xs text-gray-500 mt-1"},"Format: .xlsx, .xls (Maksimal 10MB)",-1))])]))],34),e("div",Tl,[e("label",Vl,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[30]||(t[30]=a=>B.skipDuplicates=a),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[se,B.skipDuplicates]]),t[78]||(t[78]=e("span",{class:"ml-2 text-sm text-gray-700"},"Skip data duplikat (berdasarkan email)",-1))]),e("label",Al,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[31]||(t[31]=a=>B.updateExisting=a),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[se,B.updateExisting]]),t[79]||(t[79]=e("span",{class:"ml-2 text-sm text-gray-700"},"Update data yang sudah ada",-1))]),e("label",Il,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[32]||(t[32]=a=>B.validateOnly=a),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[se,B.validateOnly]]),t[80]||(t[80]=e("span",{class:"ml-2 text-sm text-gray-700"},"Validasi saja (tidak menyimpan data)",-1))])])]),l.value.length>0?(p(),m("div",Gl,[e("h4",Ul,"3. Preview Data ("+i(l.value.length)+" record)",1),e("div",El,[e("table",Fl,[t[82]||(t[82]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-2 py-1 text-left"},"Nama"),e("th",{class:"px-2 py-1 text-left"},"Email"),e("th",{class:"px-2 py-1 text-left"},"Bidang"),e("th",{class:"px-2 py-1 text-left"},"Status"),e("th",{class:"px-2 py-1 text-left"},"Validasi")])],-1)),e("tbody",Nl,[(p(!0),m(G,null,U(l.value.slice(0,10),(a,v)=>{var I;return p(),m("tr",{key:v},[e("td",zl,i(a.name),1),e("td",Ll,i(a.email),1),e("td",Kl,i(a.department),1),e("td",Ol,[n(o(R),{variant:a.status==="active"?"success":"gray",size:"sm"},{default:g(()=>[y(i(a.status==="active"?"Aktif":"Non-aktif"),1)]),_:2},1032,["variant"])]),e("td",Rl,[((I=a.errors)==null?void 0:I.length)>0?(p(),m("span",Hl,i(a.errors[0]),1)):(p(),m("span",Wl,"✓ Valid"))])])}),128))])]),l.value.length>10?(p(),m("p",Yl," ...dan "+i(l.value.length-10)+" record lainnya ",1)):w("",!0)])])):w("",!0),c.value?(p(),m("div",Zl,[e("div",ql,[e("p",Jl,i(c.value.valid),1),t[83]||(t[83]=e("p",{class:"text-xs text-green-600"},"Valid",-1))]),e("div",Ql,[e("p",Xl,i(c.value.warnings),1),t[84]||(t[84]=e("p",{class:"text-xs text-yellow-600"},"Warning",-1))]),e("div",eo,[e("p",to,i(c.value.errors),1),t[85]||(t[85]=e("p",{class:"text-xs text-red-600"},"Error",-1))])])):w("",!0),e("div",ao,[n(o(x),{variant:"ghost",onClick:we},{default:g(()=>t[86]||(t[86]=[y(" Batal ")])),_:1,__:[86]}),n(o(x),{variant:"secondary",onClick:tt,disabled:!s.value,loading:k.value},{default:g(()=>[n(o(je),{class:"w-4 h-4"}),t[87]||(t[87]=y(" Preview "))]),_:1,__:[87]},8,["disabled","loading"]),n(o(x),{variant:"primary",onClick:at,disabled:!s.value||c.value&&c.value.errors>0,loading:F.value},{default:g(()=>[n(o(Me),{class:"w-4 h-4"}),y(" "+i(B.validateOnly?"Validasi":"Import Data"),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["show"])]))}});export{yo as default};
