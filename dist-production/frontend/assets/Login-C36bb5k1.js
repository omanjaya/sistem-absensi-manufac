import{e as k,E as p,s,d as q,N as U,O as B,r as b,c as H,P as $,j as x,q as A,B as r,v as T,H as l,l as c,y as K,Q as R,R as G,t as f,S as Q}from"./vendor-5hdk-FM1.js";import{u as J,a as W}from"./index-CpcTDv9q.js";import{_ as g,a as X}from"./Toast.vue_vue_type_style_index_0_scoped_caf7d6d7_lang-C7Vi0Lv3.js";import{_ as z}from"./Form.vue_vue_type_script_setup_true_lang-Cf_hhWd7.js";import{L as Y}from"./LoadingSpinner-DmoD0w9V.js";import{r as Z,a as ee,b as se}from"./XCircleIcon-Das-0Azk.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";function te(N,y){return p(),k("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}const re={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},oe={class:"sm:mx-auto sm:w-full sm:max-w-md"},ie={class:"text-center"},le={class:"text-3xl font-bold text-gray-900"},ne={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},de=["disabled"],me={class:"flex items-center justify-between"},ue={class:"flex items-center"},ce=["disabled"],pe={key:0,class:"p-4 bg-red-50 border border-red-200 rounded-lg"},fe={class:"flex items-center"},ve={class:"text-sm text-red-600"},be={class:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},we={class:"flex items-center mb-2"},xe={class:"space-y-2"},ge={class:"flex items-center justify-between"},ke={class:"flex items-center justify-between"},ye=q({__name:"Login",setup(N){const y=U(),h=J(),n=W(),O="Sistem Absensi Manufac",a=B({email:"",password:"",remember:!1}),t=B({}),o=b(!1),w=b(!1),v=b(!1),d=b(""),D=H(()=>a.email&&a.password&&a.password.length>=6&&/\S+@\S+\.\S+/.test(a.email)&&Object.keys(t).length===0);$(()=>a.email,()=>{t.email&&j()}),$(()=>a.password,()=>{t.password&&V()});const _=async()=>a.email?/\S+@\S+\.\S+/.test(a.email)?(w.value=!0,await new Promise(u=>setTimeout(u,500)),w.value=!1,!0):(t.email="Format email tidak valid",!1):(t.email="Email wajib diisi",!1),S=()=>a.password?a.password.length<6?(t.password="Password minimal 6 karakter",!1):!0:(t.password="Password wajib diisi",!1),j=()=>{delete t.email},V=()=>{delete t.password},F=()=>{v.value=!v.value},E=u=>{u==="admin"?(a.email="admin@absensi.com",a.password="password"):(a.email="john@absensi.com",a.password="password"),Object.keys(t).forEach(e=>delete t[e]),d.value="",n.info("Kredensial demo telah diisi")},M=async()=>{var i,C,L,P;d.value="",Object.keys(t).forEach(m=>delete t[m]);const u=await _(),e=S();if(!u||!e){n.error("Mohon perbaiki error pada form");return}o.value=!0;try{await h.login({email:a.email,password:a.password}),n.success(`Selamat datang, ${(i=h.user)==null?void 0:i.name}! ðŸŽ‰`,{timeout:3e3}),setTimeout(()=>{y.push("/")},500)}catch(m){if(console.error("Login error:",m),((C=m.response)==null?void 0:C.status)===401)d.value="Email atau password salah. Silakan periksa kembali kredensial Anda.",n.error("Login gagal: Kredensial tidak valid");else if(((L=m.response)==null?void 0:L.status)===422){const I=m.response.data.errors;Object.assign(t,I),n.error("Mohon perbaiki error pada form")}else((P=m.response)==null?void 0:P.status)>=500?(d.value="Server sedang bermasalah. Silakan coba lagi nanti.",n.error("Server error. Silakan coba lagi")):(d.value="Terjadi kesalahan jaringan. Periksa koneksi internet Anda.",n.error("Terjadi kesalahan. Silakan coba lagi"))}finally{o.value=!1}};return(u,e)=>(p(),k("div",re,[o.value?(p(),x(r(Y),{key:0,overlay:!0,text:"Memverifikasi kredensial...",color:"primary",size:"lg"})):A("",!0),s("div",oe,[s("div",ie,[e[5]||(e[5]=s("div",{class:"mx-auto h-12 w-12 flex items-center justify-center rounded-xl bg-blue-600 mb-4"},[s("svg",{class:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),s("h2",le,T(r(O)),1),e[6]||(e[6]=s("p",{class:"mt-2 text-sm text-gray-600"}," Silakan masuk ke akun Anda ",-1))])]),s("div",ne,[l(r(X),{class:"py-8 px-4 sm:px-10"},{default:c(()=>[s("form",{onSubmit:K(M,["prevent"]),class:"space-y-6",novalidate:""},[l(r(z),{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=i=>a.email=i),type:"email",label:"Email",placeholder:"nama@email.com",error:t.email,loading:w.value,disabled:o.value,autocomplete:"email",required:"",hint:"Gunakan email yang terdaftar dalam sistem",onBlur:_,onFocus:j},null,8,["modelValue","error","loading","disabled"]),l(r(z),{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=i=>a.password=i),type:v.value?"text":"password",label:"Password",placeholder:"Masukkan password",error:t.password,disabled:o.value,autocomplete:"current-password",required:"",onBlur:S,onFocus:V,onEnter:M},{"icon-right":c(()=>[s("button",{type:"button",onClick:F,class:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:o.value},[v.value?(p(),x(r(te),{key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-600"})):(p(),x(r(Z),{key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-600"}))],8,de)]),_:1},8,["modelValue","type","error","disabled"]),s("div",me,[s("div",ue,[R(s("input",{id:"remember","onUpdate:modelValue":e[2]||(e[2]=i=>a.remember=i),type:"checkbox",disabled:o.value,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"},null,8,ce),[[G,a.remember]]),e[7]||(e[7]=s("label",{for:"remember",class:"ml-2 block text-sm text-gray-900 cursor-pointer"}," Ingat saya ",-1))]),e[8]||(e[8]=s("div",{class:"text-sm"},[s("a",{href:"#",class:"font-medium text-blue-600 hover:text-blue-500 transition-colors duration-200"}," Lupa password? ")],-1))]),l(r(g),{type:"submit",variant:"primary",size:"lg",loading:o.value,disabled:!D.value||o.value,"loading-text":"Memverifikasi...",block:"","aria-label":"Masuk ke sistem"},{default:c(()=>e[9]||(e[9]=[f(" Masuk ")])),_:1,__:[9]},8,["loading","disabled"]),l(Q,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:c(()=>[d.value?(p(),k("div",pe,[s("div",fe,[l(r(ee),{class:"h-5 w-5 text-red-400 mr-2"}),s("p",ve,T(d.value),1)])])):A("",!0)]),_:1})],32),s("div",be,[s("div",we,[l(r(se),{class:"h-5 w-5 text-blue-600 mr-2"}),e[10]||(e[10]=s("p",{class:"text-sm text-blue-800 font-medium"},"Demo Login:",-1))]),s("div",xe,[s("div",ge,[e[12]||(e[12]=s("div",{class:"text-xs text-blue-700"},[s("p",null,[s("strong",null,"Admin:"),f(" admin@absensi.com / password")])],-1)),l(r(g),{variant:"ghost",size:"xs",onClick:e[3]||(e[3]=i=>E("admin")),disabled:o.value},{default:c(()=>e[11]||(e[11]=[f(" Isi ")])),_:1,__:[11]},8,["disabled"])]),s("div",ke,[e[14]||(e[14]=s("div",{class:"text-xs text-blue-700"},[s("p",null,[s("strong",null,"Employee:"),f(" john@absensi.com / password")])],-1)),l(r(g),{variant:"ghost",size:"xs",onClick:e[4]||(e[4]=i=>E("employee")),disabled:o.value},{default:c(()=>e[13]||(e[13]=[f(" Isi ")])),_:1,__:[13]},8,["disabled"])])])])]),_:1})])]))}}),Ce=ae(ye,[["__scopeId","data-v-3db6417a"]]);export{Ce as default};
