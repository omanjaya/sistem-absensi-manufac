import{d as B,r as v,O as h,o as j,e as q,E as A,s,v as n,B as i,f as C,y as P,Q as u,V as m}from"./vendor-5hdk-FM1.js";import{a as D,u as E,c as k}from"./index-CpcTDv9q.js";const I={class:"container mx-auto px-4 py-6"},T={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},N={class:"lg:col-span-1"},O={class:"bg-white rounded-lg shadow"},F={class:"p-6 text-center"},G={class:"w-24 h-24 mx-auto mb-4 bg-gray-300 rounded-full flex items-center justify-center"},R={class:"text-2xl font-semibold text-gray-700"},z={class:"text-xl font-semibold text-gray-900"},K={class:"text-gray-600"},L={class:"text-sm text-gray-500 mt-1"},Q={class:"mt-4"},H={class:"lg:col-span-2"},J={class:"bg-white rounded-lg shadow"},W={class:"space-y-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y=["value"],Z={class:"flex justify-end"},$=["disabled"],ss={class:"bg-white rounded-lg shadow mt-6"},es={class:"space-y-6"},os={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ts={class:"flex justify-end"},as=["disabled"],ns=B({__name:"Profile",setup(rs){const p=D(),o=E(),b=v(!1),c=v(!1),a=h({name:"",email:"",phone:"",employee_id:""}),t=h({current_password:"",new_password:"",new_password_confirmation:""}),U=async()=>{var r,e;try{b.value=!0;const d=await k.updateProfile({name:a.name,email:a.email,phone:a.phone});o.setUser(d),p.success("Profil berhasil diperbarui")}catch(d){p.error(((e=(r=d.response)==null?void 0:r.data)==null?void 0:e.message)||"Gagal memperbarui profil")}finally{b.value=!1}},V=async()=>{var r,e;if(t.new_password!==t.new_password_confirmation){p.error("Password baru dan konfirmasi password tidak cocok");return}try{c.value=!0,await k.changePassword({current_password:t.current_password,new_password:t.new_password,new_password_confirmation:t.new_password_confirmation}),Object.assign(t,{current_password:"",new_password:"",new_password_confirmation:""}),p.success("Password berhasil diubah")}catch(d){p.error(((e=(r=d.response)==null?void 0:r.data)==null?void 0:e.message)||"Gagal mengubah password")}finally{c.value=!1}},M=r=>({admin:"bg-purple-100 text-purple-800",employee:"bg-blue-100 text-blue-800"})[r]||"bg-gray-100 text-gray-800",S=r=>({admin:"Administrator",employee:"Pegawai"})[r]||r;return j(()=>{o.user&&Object.assign(a,{name:o.user.name,email:o.user.email,phone:o.user.phone||"",employee_id:o.user.employee_id})}),(r,e)=>{var d,g,w,f,y,x,_;return A(),q("div",I,[s("div",T,[s("div",N,[s("div",O,[e[6]||(e[6]=s("div",{class:"px-6 py-4 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Informasi Profil")],-1)),s("div",F,[s("div",G,[s("span",R,n((g=(d=i(o).user)==null?void 0:d.name)==null?void 0:g.charAt(0).toUpperCase()),1)]),s("h3",z,n((w=i(o).user)==null?void 0:w.name),1),s("p",K,n((f=i(o).user)==null?void 0:f.email),1),s("p",L,"ID: "+n((y=i(o).user)==null?void 0:y.employee_id),1),s("div",Q,[s("span",{class:C([M((x=i(o).user)==null?void 0:x.role),"px-3 py-1 text-sm font-medium rounded-full"])},n(S((_=i(o).user)==null?void 0:_.role)),3)])])])]),s("div",H,[s("div",J,[e[11]||(e[11]=s("div",{class:"px-6 py-4 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Edit Profil")],-1)),s("form",{onSubmit:P(U,["prevent"]),class:"p-6"},[s("div",W,[s("div",X,[s("div",null,[e[7]||(e[7]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Lengkap",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),type:"text",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,a.name]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.email=l),type:"email",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,a.email]])]),s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"No. Telepon",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.phone=l),type:"tel",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,a.phone]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID Pegawai",-1)),s("input",{value:a.employee_id,type:"text",readonly:"",class:"w-full rounded-md border-gray-300 bg-gray-50 shadow-sm"},null,8,Y)])]),s("div",Z,[s("button",{type:"submit",disabled:b.value,class:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors"},n(b.value?"Menyimpan...":"Simpan Perubahan"),9,$)])])],32)]),s("div",ss,[e[15]||(e[15]=s("div",{class:"px-6 py-4 border-b border-gray-200"},[s("h2",{class:"text-lg font-semibold text-gray-900"},"Ubah Password")],-1)),s("form",{onSubmit:P(V,["prevent"]),class:"p-6"},[s("div",es,[s("div",null,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password Saat Ini",-1)),u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.current_password=l),type:"password",required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,t.current_password]])]),s("div",os,[s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Password Baru",-1)),u(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.new_password=l),type:"password",required:"",minlength:"8",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,t.new_password]])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Konfirmasi Password Baru",-1)),u(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.new_password_confirmation=l),type:"password",required:"",minlength:"8",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[m,t.new_password_confirmation]])])]),s("div",ts,[s("button",{type:"submit",disabled:c.value,class:"bg-red-600 text-white px-6 py-2 rounded-md hover:bg-red-700 disabled:opacity-50 transition-colors"},n(c.value?"Mengubah...":"Ubah Password"),9,as)])])],32)])])])])}}});export{ns as default};
